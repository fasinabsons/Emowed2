# PAGE SPECIFICATION: SINGLE USER DASHBOARD

## PAGE DETAILS
- **URL:** `/dashboard`
- **Access:** Authenticated (Single users only)
- **Purpose:** Central hub for single users to find partner and manage profile
- **Parent Layout:** DashboardLayout

---

## LAYOUT STRUCTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEADER (Component)                                        â”‚
â”‚  Logo | Dashboard | Matchmaking | Settings | Profile      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   SIDEBAR        â”‚  â”‚   MAIN CONTENT                 â”‚  â”‚
â”‚  â”‚   (25%)          â”‚  â”‚   (75%)                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                  â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  Profile Card    â”‚  â”‚  Welcome Section               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ‘¤ Avatar  â”‚  â”‚  â”‚  â”‚ Hi Faseen! ğŸ‘‹            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Faseen     â”‚  â”‚  â”‚  â”‚ Status: ğŸŸ¢ Single       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 28 years   â”‚  â”‚  â”‚  â”‚ Member since: Nov 2025  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Mumbai     â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”‚            â”‚  â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â”‚ [Edit]     â”‚  â”‚  â”‚  Partner Invitation Card       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ’Œ Find Your Partner      â”‚ â”‚  â”‚
â”‚  â”‚  Profile Comp.   â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 60%  â”‚  â”‚  â”‚ Enter partner's email:    â”‚ â”‚  â”‚
â”‚  â”‚  [Complete]      â”‚  â”‚  â”‚ [_________________]       â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚  Quick Actions   â”‚  â”‚  â”‚ [Generate Code] ğŸ’        â”‚ â”‚  â”‚
â”‚  â”‚  â€¢ Edit Profile  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚  â€¢ Upgrade Pro   â”‚  â”‚  â”‚ OR                        â”‚ â”‚  â”‚
â”‚  â”‚  â€¢ Invite Friend â”‚  â”‚  â”‚ Already have code?        â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ [Enter Code] ğŸ”‘          â”‚ â”‚  â”‚
â”‚  â”‚  Subscription    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  Status: Free    â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  [Upgrade] â­   â”‚  â”‚  Matchmaking Preview (Locked)  â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ’‘ Find Your Match       â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ [Blurred profiles]       â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ”’ Upgrade to Premium    â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ to unlock matchmaking    â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ [See Plans] ğŸ’           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  Wedding Invitations           â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ“… Upcoming Weddings     â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ â€¢ Rahul & Priya          â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚   Dec 15, 2025           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚   Mumbai                 â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚   [RSVP] [View]          â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ [No invitations yet]     â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  Activity Feed                 â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ ğŸ”” Recent Updates        â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ â€¢ 847 couples joined     â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚   Emowed this week!      â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚                           â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚ â€¢ New feature: Video     â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â”‚   call matching          â”‚ â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## COMPONENT SPECIFICATIONS

### 1. Profile Card (Sidebar)

```tsx
<ProfileCard>
  <Avatar
    src={user.avatar}
    fallback={user.full_name.charAt(0)}
    size="xl"
    editable
    onClick={openAvatarUpload}
  />
  
  <UserInfo>
    <Name>{user.full_name}</Name>
    <Details>
      <Detail>
        <CakeIcon /> {user.age} years
      </Detail>
      <Detail>
        <MapPinIcon /> {user.city || 'Add location'}
      </Detail>
      <Detail>
        <StatusBadge status="single">Single</StatusBadge>
      </Detail>
    </Details>
  </UserInfo>
  
  <EditButton variant="outline" href="/profile/edit">
    <EditIcon /> Edit Profile
  </EditButton>
  
  <Divider />
  
  <ProfileCompletion>
    <Label>Profile Completion</Label>
    <ProgressBar value={profileCompletionPercentage} />
    <Percentage>{profileCompletionPercentage}%</Percentage>
    <MissingItems>
      {!user.avatar && <Item>â€¢ Add profile photo</Item>}
      {!user.bio && <Item>â€¢ Write bio</Item>}
      {!user.city && <Item>â€¢ Add location</Item>}
    </MissingItems>
    <CompleteButton>Complete Profile</CompleteButton>
  </ProfileCompletion>
</ProfileCard>
```

**Profile Completion Logic:**
```typescript
const calculateProfileCompletion = (user) => {
  const fields = [
    user.avatar,
    user.full_name,
    user.email,
    user.age,
    user.phone,
    user.city,
    user.bio,
    user.occupation,
    user.education,
    user.interests
  ];
  
  const completed = fields.filter(Boolean).length;
  return Math.round((completed / fields.length) * 100);
};
```

---

### 2. Welcome Section

```tsx
<WelcomeSection>
  <Greeting>Hi {user.full_name.split(' ')[0]}! ğŸ‘‹</Greeting>
  
  <StatusRow>
    <StatusItem>
      <StatusDot color="green" />
      <Text>Status: Single</Text>
    </StatusItem>
    <StatusItem>
      <CalendarIcon />
      <Text>Member since {formatDate(user.created_at)}</Text>
    </StatusItem>
  </StatusRow>
  
  <QuickStats>
    <Stat>
      <Value>0</Value>
      <Label>Pending Invitations</Label>
    </Stat>
    <Stat>
      <Value>2</Value>
      <Label>Wedding Invites</Label>
    </Stat>
    <Stat>
      <Value>Free</Value>
      <Label>Plan</Label>
    </Stat>
  </QuickStats>
</WelcomeSection>
```

---

### 3. Partner Invitation Card

```tsx
<PartnerInvitationCard>
  <CardHeader>
    <Icon>ğŸ’Œ</Icon>
    <Title>Ready to find your partner?</Title>
  </CardHeader>
  
  <CardBody>
    <Tabs defaultValue="send">
      <TabList>
        <Tab value="send">Send Invitation</Tab>
        <Tab value="receive">Have a Code?</Tab>
      </TabList>
      
      <TabPanel value="send">
        <Form onSubmit={generateInvitationCode}>
          <InputField>
            <Label>Partner's Email Address</Label>
            <Input
              type="email"
              placeholder="partner@example.com"
              value={partnerEmail}
              onChange={setPartnerEmail}
              error={emailError}
            />
            {emailError && <ErrorText>{emailError}</ErrorText>}
          </InputField>
          
          <Button 
            type="submit" 
            disabled={!partnerEmail || loading}
            fullWidth
          >
            {loading ? (
              <><Spinner /> Generating...</>
            ) : (
              <>ğŸ’ Generate Invitation Code</>
            )}
          </Button>
        </Form>
        
        {generatedCode && (
          <GeneratedCodeModal>
            <ModalHeader>
              âœ… Invitation Created!
            </ModalHeader>
            <ModalBody>
              <CodeDisplay>
                <Code>{generatedCode.code}</Code>
                <CopyButton onClick={copyCode}>
                  <CopyIcon /> Copy
                </CopyButton>
              </CodeDisplay>
              
              <Expiry>
                â° Expires in {formatTimeRemaining(generatedCode.expires_at)}
              </Expiry>
              
              <ShareOptions>
                <ShareTitle>Share with {partnerEmail}:</ShareTitle>
                <ShareButtons>
                  <ShareButton 
                    variant="whatsapp"
                    onClick={shareViaWhatsApp}
                  >
                    <WhatsAppIcon /> WhatsApp
                  </ShareButton>
                  <ShareButton 
                    variant="email"
                    onClick={shareViaEmail}
                  >
                    <MailIcon /> Email
                  </ShareButton>
                  <ShareButton 
                    variant="link"
                    onClick={copyLink}
                  >
                    <LinkIcon /> Copy Link
                  </ShareButton>
                </ShareButtons>
              </ShareOptions>
            </ModalBody>
          </GeneratedCodeModal>
        )}
      </TabPanel>
      
      <TabPanel value="receive">
        <Form onSubmit={acceptInvitation}>
          <InputField>
            <Label>Enter 6-Character Code</Label>
            <CodeInput
              length={6}
              value={inviteCode}
              onChange={setInviteCode}
              autoFocus
            />
          </InputField>
          
          <Button 
            type="submit" 
            disabled={inviteCode.length !== 6 || loading}
            fullWidth
          >
            {loading ? (
              <><Spinner /> Validating...</>
            ) : (
              <>ğŸ”‘ Accept Invitation</>
            )}
          </Button>
        </Form>
      </TabPanel>
    </Tabs>
  </CardBody>
</PartnerInvitationCard>
```

**Code Generation Logic:**
```typescript
const generateInvitationCode = async () => {
  setLoading(true);
  
  try {
    // Validate email
    if (!validateEmail(partnerEmail)) {
      setEmailError('Please enter a valid email');
      return;
    }
    
    // Check if user can invite (not in cooldown, < 3 rejections)
    const { data: user } = await supabase
      .from('users')
      .select('can_invite, relationship_status')
      .eq('id', currentUser.id)
      .single();
    
    if (!user.can_invite) {
      toast.error('You have reached invitation limit. Partner must invite you.');
      return;
    }
    
    if (user.relationship_status !== 'single') {
      toast.error('You must be single to send invitations');
      return;
    }
    
    // Check if receiver is already in relationship
    const { data: receiver } = await supabase
      .from('users')
      .select('relationship_status')
      .eq('email', partnerEmail)
      .single();
    
    if (receiver && receiver.relationship_status !== 'single') {
      toast.error('This person is already in a relationship');
      return;
    }
    
    // Generate code via Supabase function
    const { data, error } = await supabase.rpc('generate_invite_code', {
      p_sender_id: currentUser.id,
      p_receiver_email: partnerEmail
    });
    
    if (error) throw error;
    
    setGeneratedCode(data);
    toast.success('Invitation created! Share the code with your partner.');
    
  } catch (error) {
    toast.error(error.message || 'Failed to generate invitation');
  } finally {
    setLoading(false);
  }
};
```

---

### 4. Matchmaking Preview (Locked)

```tsx
<MatchmakingPreview>
  <PreviewHeader>
    <Icon>ğŸ’‘</Icon>
    <Title>Find Your Perfect Match</Title>
    <PremiumBadge>Premium</PremiumBadge>
  </PreviewHeader>
  
  <PreviewBody>
    <BlurredProfiles>
      {[1, 2, 3, 4].map(i => (
        <BlurredCard key={i}>
          <BlurredAvatar />
          <BlurredInfo />
        </BlurredCard>
      ))}
    </BlurredProfiles>
    
    <Overlay>
      <LockIcon size="large" />
      <OverlayText>
        <Strong>Unlock Matchmaking</Strong>
        <Description>
          Access 2,847 verified profiles with 73% match success rate
        </Description>
      </OverlayText>
      
      <Features>
        <Feature>âœ“ Aadhaar verified profiles</Feature>
        <Feature>âœ“ Advanced matching algorithm</Feature>
        <Feature>âœ“ Video call built-in</Feature>
        <Feature>âœ“ Parent mode available</Feature>
      </Features>
      
      <UpgradeButton href="/pricing">
        ğŸ’ See Premium Plans
      </UpgradeButton>
    </Overlay>
  </PreviewBody>
</MatchmakingPreview>
```

---

### 5. Wedding Invitations Card

```tsx
<WeddingInvitationsCard>
  <CardHeader>
    <Icon>ğŸ“…</Icon>
    <Title>Upcoming Weddings</Title>
    <Badge>{invitations.length}</Badge>
  </CardHeader>
  
  <CardBody>
    {invitations.length === 0 ? (
      <EmptyState>
        <EmptyIcon>ğŸŠ</EmptyIcon>
        <EmptyText>No wedding invitations yet</EmptyText>
        <EmptySubtext>
          You'll see weddings you're invited to here
        </EmptySubtext>
      </EmptyState>
    ) : (
      <InvitationsList>
        {invitations.map(invitation => (
          <InvitationItem key={invitation.id}>
            <InvitationInfo>
              <CoupleNames>
                {invitation.groom_name} & {invitation.bride_name}
              </CoupleNames>
              <WeddingDetails>
                <Detail>
                  <CalendarIcon /> {formatDate(invitation.wedding_date)}
                </Detail>
                <Detail>
                  <MapPinIcon /> {invitation.city}
                </Detail>
                <Detail>
                  <UsersIcon /> {invitation.guest_count} guests
                </Detail>
              </WeddingDetails>
            </InvitationInfo>
            
            <InvitationActions>
              {!invitation.rsvp_status ? (
                <Button 
                  variant="primary" 
                  size="sm"
                  onClick={() => openRSVPModal(invitation)}
                >
                  RSVP Now
                </Button>
              ) : (
                <RSVPStatus status={invitation.rsvp_status}>
                  {invitation.rsvp_status === 'attending' && 'âœ… Attending'}
                  {invitation.rsvp_status === 'not_attending' && 'âŒ Not Attending'}
                  {invitation.rsvp_status === 'maybe' && 'â“ Maybe'}
                </RSVPStatus>
              )}
              
              <Button 
                variant="ghost" 
                size="sm"
                href={`/wedding/${invitation.wedding_id}`}
              >
                View Details â†’
              </Button>
            </InvitationActions>
          </InvitationItem>
        ))}
      </InvitationsList>
    )}
  </CardBody>
</WeddingInvitationsCard>
```

---

### 6. Activity Feed

```tsx
<ActivityFeed>
  <FeedHeader>
    <Icon>ğŸ””</Icon>
    <Title>Recent Updates</Title>
  </FeedHeader>
  
  <FeedBody>
    {activities.map(activity => (
      <ActivityItem key={activity.id}>
        <ActivityIcon type={activity.type} />
        <ActivityContent>
          <ActivityText>{activity.message}</ActivityText>
          <ActivityTime>{formatTimeAgo(activity.created_at)}</ActivityTime>
        </ActivityContent>
      </ActivityItem>
    ))}
    
    {/* Sample activities */}
    <ActivityItem>
      <HeartIcon color="pink" />
      <ActivityContent>
        <ActivityText>
          847 couples joined Emowed this week! ğŸ‰
        </ActivityText>
        <ActivityTime>2 hours ago</ActivityTime>
      </ActivityContent>
    </ActivityItem>
    
    <ActivityItem>
      <SparklesIcon color="gold" />
      <ActivityContent>
        <ActivityText>
          New feature: Video call matching is now live!
        </ActivityText>
        <ActivityTime>1 day ago</ActivityTime>
      </ActivityContent>
    </ActivityItem>
    
    <ActivityItem>
      <TrophyIcon color="green" />
      <ActivityContent>
        <ActivityText>
          Complete your profile to increase visibility
        </ActivityText>
        <ActivityTime>2 days ago</ActivityTime>
      </ActivityContent>
    </ActivityItem>
  </FeedBody>
</ActivityFeed>
```

---

## STATE MANAGEMENT

```typescript
interface DashboardState {
  user: User;
  invitations: WeddingInvitation[];
  activities: Activity[];
  partnerEmail: string;
  generatedCode: InvitationCode | null;
  inviteCode: string;
  loading: boolean;
  emailError: string | null;
}

const useDashboard = () => {
  const [state, setState] = useState<DashboardState>({
    user: null,
    invitations: [],
    activities: [],
    partnerEmail: '',
    generatedCode: null,
    inviteCode: '',
    loading: false,
    emailError: null
  });
  
  // Fetch user data
  useEffect(() => {
    fetchUserData();
    fetchInvitations();
    fetchActivities();
  }, []);
  
  const fetchUserData = async () => {
    const { data: user } = await supabase
      .from('users')
      .select('*')
      .eq('id', currentUser.id)
      .single();
    
    setState(prev => ({ ...prev, user }));
  };
  
  const fetchInvitations = async () => {
    const { data: invitations } = await supabase
      .from('guest_invitations')
      .select(`
        *,
        wedding:weddings(*)
      `)
      .eq('invitee_email', currentUser.email)
      .eq('status', 'accepted');
    
    setState(prev => ({ ...prev, invitations }));
  };
  
  return state;
};
```

---

## REAL-TIME SUBSCRIPTIONS

```typescript
// Subscribe to invitation status changes
useEffect(() => {
  const subscription = supabase
    .channel('invitations')
    .on(
      'postgres_changes',
      {
        event: '*',
        schema: 'public',
        table: 'partner_invitations',
        filter: `sender_id=eq.${currentUser.id}`
      },
      (payload) => {
        if (payload.eventType === 'UPDATE') {
          if (payload.new.status === 'accepted') {
            toast.success('ğŸ‰ Your partner accepted! Redirecting...');
            setTimeout(() => router.push('/dashboard'), 2000);
          } else if (payload.new.status === 'rejected') {
            toast.error('ğŸ’” Invitation declined');
            setGeneratedCode(null);
          }
        }
      }
    )
    .subscribe();
  
  return () => {
    subscription.unsubscribe();
  };
}, []);
```

---

## MOBILE RESPONSIVE

```css
/* Desktop: Sidebar + Main */
@media (min-width: 768px) {
  .dashboard-container {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: var(--space-6);
  }
}

/* Mobile: Stack vertically */
@media (max-width: 767px) {
  .dashboard-container {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }
  
  .sidebar {
    position: sticky;
    top: 60px;
    z-index: 10;
  }
  
  .profile-card {
    flex-direction: row;
    align-items: center;
  }
  
  .avatar {
    width: 60px;
    height: 60px;
  }
}
```

---

## LOADING STATES

```tsx
<LoadingDashboard>
  <Skeleton variant="circular" width={120} height={120} />
  <Skeleton variant="text" width="60%" />
  <Skeleton variant="rectangular" height={200} />
  <Skeleton variant="rectangular" height={300} />
</LoadingDashboard>
```

---

## ERROR HANDLING

```typescript
const handleError = (error: Error) => {
  console.error('Dashboard error:', error);
  
  if (error.message.includes('auth')) {
    toast.error('Session expired. Please login again.');
    router.push('/login');
  } else if (error.message.includes('network')) {
    toast.error('Connection issue. Please check your internet.');
  } else {
    toast.error('Something went wrong. Please refresh the page.');
  }
};
```

---

## SUCCESS METRICS

- **Profile Completion Rate:** 80%+ complete profile within 7 days
- **Invitation Sent Rate:** 60%+ send invitation within 24 hours
- **Time to Action:** < 5 minutes to send first invitation
- **Upgrade Prompt Click:** 15%+ click on matchmaking preview

---

This single user dashboard is designed to guide users toward sending partner invitations while showcasing premium features! ğŸ¯

