# EMOWED - TECHNICAL ARCHITECTURE SPECIFICATION

## EXECUTIVE SUMMARY

**Project:** Emowed - Full-lifecycle relationship platform
**Stack:** React + TypeScript + Tailwind CSS + Supabase
**Development Tool:** Lovable.dev + Claude Code
**Target Scale:** 10,000+ weddings/year by Year 3
**Budget:** Phase 1: $72 | Production: $3,249/month at scale

---

## 1. SYSTEM ARCHITECTURE OVERVIEW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENT LAYER (Frontend)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  React 18 + TypeScript + Tailwind CSS                       â”‚
â”‚  â”œâ”€â”€ State: React Context API + React Query                 â”‚
â”‚  â”œâ”€â”€ Routing: React Router v6                               â”‚
â”‚  â”œâ”€â”€ Forms: React Hook Form + Zod                           â”‚
â”‚  â”œâ”€â”€ UI: shadcn/ui components                               â”‚
â”‚  â”œâ”€â”€ Animations: Framer Motion                              â”‚
â”‚  â”œâ”€â”€ Charts: Recharts                                       â”‚
â”‚  â”œâ”€â”€ Real-time: Supabase Realtime                           â”‚
â”‚  â””â”€â”€ PWA: Workbox + Service Workers                         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ HTTPS / WSS
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API LAYER (Backend)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Supabase (Backend-as-a-Service)                            â”‚
â”‚  â”œâ”€â”€ Auth: Email/Password + OAuth (Google, Apple)           â”‚
â”‚  â”œâ”€â”€ Database: PostgreSQL 14                                â”‚
â”‚  â”œâ”€â”€ Storage: Object Storage (Images, Videos, Files)        â”‚
â”‚  â”œâ”€â”€ Realtime: WebSocket subscriptions                      â”‚
â”‚  â”œâ”€â”€ Edge Functions: Serverless API endpoints               â”‚
â”‚  â”œâ”€â”€ Row Level Security (RLS): Policy-based access          â”‚
â”‚  â””â”€â”€ Functions: Custom PostgreSQL functions                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ SQL / REST / WebSocket
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DATA LAYER (Database)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  PostgreSQL 14 (Supabase Managed)                           â”‚
â”‚  â”œâ”€â”€ Tables: 45+ tables (see schema below)                  â”‚
â”‚  â”œâ”€â”€ Indexes: 150+ for query optimization                   â”‚
â”‚  â”œâ”€â”€ Triggers: 25+ for automation                           â”‚
â”‚  â”œâ”€â”€ Functions: 30+ stored procedures                       â”‚
â”‚  â”œâ”€â”€ Views: 15+ materialized views                          â”‚
â”‚  â””â”€â”€ Policies: 200+ RLS policies                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Backup & Replication
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXTERNAL SERVICES LAYER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Media Storage: Cloudinary                                   â”‚
â”‚  â”œâ”€â”€ Image optimization & CDN                               â”‚
â”‚  â”œâ”€â”€ Video transcoding                                      â”‚
â”‚  â””â”€â”€ Transformation API                                     â”‚
â”‚                                                              â”‚
â”‚  Caching: Redis Cloud (Upstash)                             â”‚
â”‚  â”œâ”€â”€ Session storage                                        â”‚
â”‚  â”œâ”€â”€ Query caching                                          â”‚
â”‚  â””â”€â”€ Rate limiting                                          â”‚
â”‚                                                              â”‚
â”‚  Email: Resend or SendGrid                                  â”‚
â”‚  â”œâ”€â”€ Transactional emails                                   â”‚
â”‚  â”œâ”€â”€ Email templates                                        â”‚
â”‚  â””â”€â”€ Deliverability tracking                                â”‚
â”‚                                                              â”‚
â”‚  SMS: Twilio                                                 â”‚
â”‚  â”œâ”€â”€ OTP verification                                       â”‚
â”‚  â”œâ”€â”€ Reminders                                              â”‚
â”‚  â””â”€â”€ Notifications                                          â”‚
â”‚                                                              â”‚
â”‚  Payments: Razorpay (India)                                 â”‚
â”‚  â”œâ”€â”€ UPI integration                                        â”‚
â”‚  â”œâ”€â”€ Card payments                                          â”‚
â”‚  â”œâ”€â”€ Subscriptions                                          â”‚
â”‚  â””â”€â”€ Webhooks                                               â”‚
â”‚                                                              â”‚
â”‚  Analytics: Mixpanel + Google Analytics 4                   â”‚
â”‚  â”œâ”€â”€ User behavior tracking                                 â”‚
â”‚  â”œâ”€â”€ Conversion funnels                                     â”‚
â”‚  â”œâ”€â”€ Cohort analysis                                        â”‚
â”‚  â””â”€â”€ Revenue tracking                                       â”‚
â”‚                                                              â”‚
â”‚  Monitoring: Sentry                                          â”‚
â”‚  â”œâ”€â”€ Error tracking                                         â”‚
â”‚  â”œâ”€â”€ Performance monitoring                                 â”‚
â”‚  â””â”€â”€ Release tracking                                       â”‚
â”‚                                                              â”‚
â”‚  Video Streaming: YouTube Live API                          â”‚
â”‚  â””â”€â”€ Live wedding streaming                                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. FRONTEND ARCHITECTURE

### 2.1 Directory Structure

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ SignupForm.tsx
â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”œâ”€â”€ ForgotPasswordForm.tsx
â”‚   â”‚   â”œâ”€â”€ ResetPasswordForm.tsx
â”‚   â”‚   â””â”€â”€ EmailVerification.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ SingleUserDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ EngagedDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ MarriedDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ StatsCard.tsx
â”‚   â”‚   â””â”€â”€ QuickActions.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ invitations/
â”‚   â”‚   â”œâ”€â”€ PartnerInviteForm.tsx
â”‚   â”‚   â”œâ”€â”€ InviteCodeInput.tsx
â”‚   â”‚   â”œâ”€â”€ AcceptInviteModal.tsx
â”‚   â”‚   â”œâ”€â”€ RejectInviteModal.tsx
â”‚   â”‚   â””â”€â”€ InviteShareButtons.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ wedding/
â”‚   â”‚   â”œâ”€â”€ WeddingCreationForm.tsx
â”‚   â”‚   â”œâ”€â”€ WeddingCard.tsx
â”‚   â”‚   â”œâ”€â”€ WeddingTimeline.tsx
â”‚   â”‚   â”œâ”€â”€ WeddingSettings.tsx
â”‚   â”‚   â””â”€â”€ CancelWeddingFlow.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”œâ”€â”€ EventCard.tsx
â”‚   â”‚   â”œâ”€â”€ EventForm.tsx
â”‚   â”‚   â”œâ”€â”€ EventTimeline.tsx
â”‚   â”‚   â”œâ”€â”€ EventDetails.tsx
â”‚   â”‚   â””â”€â”€ EventProgramList.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ guests/
â”‚   â”‚   â”œâ”€â”€ GuestInviteForm.tsx
â”‚   â”‚   â”œâ”€â”€ GuestList.tsx
â”‚   â”‚   â”œâ”€â”€ GuestCard.tsx
â”‚   â”‚   â”œâ”€â”€ GuestDetails.tsx
â”‚   â”‚   â”œâ”€â”€ GuestFilters.tsx
â”‚   â”‚   â””â”€â”€ BulkInviteUpload.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ rsvp/
â”‚   â”‚   â”œâ”€â”€ RSVPForm.tsx
â”‚   â”‚   â”œâ”€â”€ RSVPList.tsx
â”‚   â”‚   â”œâ”€â”€ RSVPCard.tsx
â”‚   â”‚   â”œâ”€â”€ RSVPStats.tsx
â”‚   â”‚   â””â”€â”€ RSVPReminders.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ family-tree/
â”‚   â”‚   â”œâ”€â”€ FamilyTreeView.tsx
â”‚   â”‚   â”œâ”€â”€ FamilyTreeNode.tsx
â”‚   â”‚   â”œâ”€â”€ FamilyTreeControls.tsx
â”‚   â”‚   â””â”€â”€ FamilyTreeLegend.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ vendors/
â”‚   â”‚   â”œâ”€â”€ VendorInviteForm.tsx
â”‚   â”‚   â”œâ”€â”€ VendorList.tsx
â”‚   â”‚   â”œâ”€â”€ VendorCard.tsx
â”‚   â”‚   â”œâ”€â”€ VendorQuote.tsx
â”‚   â”‚   â”œâ”€â”€ VendorVoting.tsx
â”‚   â”‚   â”œâ”€â”€ VendorComparison.tsx
â”‚   â”‚   â””â”€â”€ VendorProfile.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ media/
â”‚   â”‚   â”œâ”€â”€ Gallery.tsx
â”‚   â”‚   â”œâ”€â”€ PhotoUpload.tsx
â”‚   â”‚   â”œâ”€â”€ VideoUpload.tsx
â”‚   â”‚   â”œâ”€â”€ MediaCard.tsx
â”‚   â”‚   â”œâ”€â”€ BulkDownload.tsx
â”‚   â”‚   â””â”€â”€ LiveStream.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ wedding-card/
â”‚   â”‚   â”œâ”€â”€ CardCreator.tsx
â”‚   â”‚   â”œâ”€â”€ TemplateSelector.tsx
â”‚   â”‚   â”œâ”€â”€ CardPreview.tsx
â”‚   â”‚   â”œâ”€â”€ AnimationSelector.tsx
â”‚   â”‚   â””â”€â”€ CardShare.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ games/
â”‚   â”‚   â”œâ”€â”€ GameCreator.tsx
â”‚   â”‚   â”œâ”€â”€ GameList.tsx
â”‚   â”‚   â”œâ”€â”€ GamePlayer.tsx
â”‚   â”‚   â”œâ”€â”€ Leaderboard.tsx
â”‚   â”‚   â””â”€â”€ GameResults.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ gifts/
â”‚   â”‚   â”œâ”€â”€ GiftMarketplace.tsx
â”‚   â”‚   â”œâ”€â”€ GiftCard.tsx
â”‚   â”‚   â”œâ”€â”€ GiftCheckout.tsx
â”‚   â”‚   â”œâ”€â”€ GiftTracker.tsx
â”‚   â”‚   â””â”€â”€ ThankYouNotes.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ matchmaking/
â”‚   â”‚   â”œâ”€â”€ MatchmakingProfile.tsx
â”‚   â”‚   â”œâ”€â”€ MatchCard.tsx
â”‚   â”‚   â”œâ”€â”€ SwipeInterface.tsx
â”‚   â”‚   â”œâ”€â”€ MatchList.tsx
â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx
â”‚   â”‚   â”œâ”€â”€ VideoCall.tsx
â”‚   â”‚   â””â”€â”€ MatchProbability.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ post-marriage/
â”‚   â”‚   â”œâ”€â”€ CoupleDiary.tsx
â”‚   â”‚   â”œâ”€â”€ DiaryEntry.tsx
â”‚   â”‚   â”œâ”€â”€ SharedGoals.tsx
â”‚   â”‚   â”œâ”€â”€ DateNightPlanner.tsx
â”‚   â”‚   â”œâ”€â”€ TripPlanner.tsx
â”‚   â”‚   â”œâ”€â”€ GiftTracker.tsx
â”‚   â”‚   â””â”€â”€ AnniversaryReminder.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ community/
â”‚   â”‚   â”œâ”€â”€ ForumList.tsx
â”‚   â”‚   â”œâ”€â”€ PostCard.tsx
â”‚   â”‚   â”œâ”€â”€ PostDetails.tsx
â”‚   â”‚   â”œâ”€â”€ CommentSection.tsx
â”‚   â”‚   â”œâ”€â”€ CreatePost.tsx
â”‚   â”‚   â””â”€â”€ CategoryFilter.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ counseling/
â”‚   â”‚   â”œâ”€â”€ CounselorList.tsx
â”‚   â”‚   â”œâ”€â”€ CounselorCard.tsx
â”‚   â”‚   â”œâ”€â”€ CounselorProfile.tsx
â”‚   â”‚   â”œâ”€â”€ BookingForm.tsx
â”‚   â”‚   â”œâ”€â”€ SessionRoom.tsx
â”‚   â”‚   â””â”€â”€ ReviewForm.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Select.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ Dropdown.tsx
â”‚   â”‚   â”œâ”€â”€ Tooltip.tsx
â”‚   â”‚   â”œâ”€â”€ Badge.tsx
â”‚   â”‚   â”œâ”€â”€ Avatar.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ Tabs.tsx
â”‚   â”‚   â”œâ”€â”€ Table.tsx
â”‚   â”‚   â”œâ”€â”€ Pagination.tsx
â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”œâ”€â”€ ConfirmDialog.tsx
â”‚   â”‚   â””â”€â”€ StatusBadge.tsx
â”‚   â”‚
â”‚   â””â”€â”€ layouts/
â”‚       â”œâ”€â”€ MainLayout.tsx
â”‚       â”œâ”€â”€ AuthLayout.tsx
â”‚       â”œâ”€â”€ DashboardLayout.tsx
â”‚       â””â”€â”€ WeddingLayout.tsx
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useUser.ts
â”‚   â”œâ”€â”€ useInvitations.ts
â”‚   â”œâ”€â”€ useWeddings.ts
â”‚   â”œâ”€â”€ useEvents.ts
â”‚   â”œâ”€â”€ useGuests.ts
â”‚   â”œâ”€â”€ useRSVPs.ts
â”‚   â”œâ”€â”€ useVendors.ts
â”‚   â”œâ”€â”€ useMedia.ts
â”‚   â”œâ”€â”€ useGames.ts
â”‚   â”œâ”€â”€ useMatchmaking.ts
â”‚   â”œâ”€â”€ useNotifications.ts
â”‚   â”œâ”€â”€ useRealtime.ts
â”‚   â”œâ”€â”€ useLocalStorage.ts
â”‚   â”œâ”€â”€ useDebounce.ts
â”‚   â””â”€â”€ useInfiniteScroll.ts
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”œâ”€â”€ validations.ts
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ constants.ts
â”‚   â”œâ”€â”€ utils.ts
â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”œâ”€â”€ date-helpers.ts
â”‚   â””â”€â”€ permissions.ts
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ database.ts
â”‚   â”œâ”€â”€ api.ts
â”‚   â””â”€â”€ enums.ts
â”‚
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚   â”œâ”€â”€ WeddingContext.tsx
â”‚   â”œâ”€â”€ ThemeContext.tsx
â”‚   â””â”€â”€ NotificationContext.tsx
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”œâ”€â”€ Signup.tsx
â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”œâ”€â”€ AcceptInvite.tsx
â”‚   â”œâ”€â”€ CreateWedding.tsx
â”‚   â”œâ”€â”€ WeddingDashboard.tsx
â”‚   â”œâ”€â”€ EventTimeline.tsx
â”‚   â”œâ”€â”€ GuestManagement.tsx
â”‚   â”œâ”€â”€ RSVPManagement.tsx
â”‚   â”œâ”€â”€ FamilyTree.tsx
â”‚   â”œâ”€â”€ VendorManagement.tsx
â”‚   â”œâ”€â”€ MediaGallery.tsx
â”‚   â”œâ”€â”€ WeddingCard.tsx
â”‚   â”œâ”€â”€ Games.tsx
â”‚   â”œâ”€â”€ Gifts.tsx
â”‚   â”œâ”€â”€ Matchmaking.tsx
â”‚   â”œâ”€â”€ PostMarriage.tsx
â”‚   â”œâ”€â”€ Community.tsx
â”‚   â”œâ”€â”€ Counseling.tsx
â”‚   â”œâ”€â”€ Settings.tsx
â”‚   â””â”€â”€ NotFound.tsx
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ variables.css
â”‚   â””â”€â”€ animations.css
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ fonts/
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ routes.ts
â”‚   â”œâ”€â”€ env.ts
â”‚   â””â”€â”€ features.ts
â”‚
â””â”€â”€ App.tsx
```

### 2.2 State Management Architecture

```typescript
// State Management Strategy

// 1. Server State: React Query
// - API data fetching
// - Caching
// - Background refetching
// - Optimistic updates

// 2. Client State: React Context
// - User authentication
// - Theme preferences
// - UI state (modals, sidebars)

// 3. Local State: useState/useReducer
// - Form state
// - Component-specific state

// 4. URL State: React Router
// - Current page
// - Query parameters
// - Navigation history
```

**Example: React Query Setup**

```typescript
// src/lib/react-query.ts
import { QueryClient } from '@tanstack/react-query';

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5 minutes
      cacheTime: 1000 * 60 * 30, // 30 minutes
      refetchOnWindowFocus: false,
      retry: 1,
    },
  },
});
```

### 2.3 Component Architecture Patterns

**1. Compound Components Pattern**

```typescript
// Example: Modal Component
<Modal>
  <Modal.Header>Title</Modal.Header>
  <Modal.Body>Content</Modal.Body>
  <Modal.Footer>Actions</Modal.Footer>
</Modal>
```

**2. Render Props Pattern**

```typescript
// Example: Data Fetcher
<DataFetcher url="/api/guests">
  {({ data, loading, error }) => (
    loading ? <Spinner /> : <GuestList guests={data} />
  )}
</DataFetcher>
```

**3. Custom Hooks Pattern**

```typescript
// Example: useGuests hook
const { guests, loading, addGuest, deleteGuest } = useGuests(weddingId);
```

---

## 3. BACKEND ARCHITECTURE (Supabase)

### 3.1 Database Schema Architecture

**Core Entities:**

```
users (auth.users + custom fields)
â”œâ”€â”€ couples (relationship entity)
â”‚   â””â”€â”€ weddings (wedding details)
â”‚       â”œâ”€â”€ events (timeline events)
â”‚       â”œâ”€â”€ guests (guest list)
â”‚       â”‚   â”œâ”€â”€ guest_invitations (invitation tracking)
â”‚       â”‚   â”œâ”€â”€ rsvps (attendance tracking)
â”‚       â”‚   â””â”€â”€ family_tree (relationships)
â”‚       â”œâ”€â”€ vendors (vendor list)
â”‚       â”‚   â”œâ”€â”€ vendor_quotes (pricing)
â”‚       â”‚   â”œâ”€â”€ vendor_votes (family voting)
â”‚       â”‚   â””â”€â”€ vendor_bookings (confirmed)
â”‚       â”œâ”€â”€ media_gallery (photos/videos)
â”‚       â”œâ”€â”€ wedding_cards (digital invites)
â”‚       â”œâ”€â”€ games (gamification)
â”‚       â”‚   â”œâ”€â”€ game_submissions (entries)
â”‚       â”‚   â””â”€â”€ leaderboards (scores)
â”‚       â”œâ”€â”€ gifts (gift registry)
â”‚       â”‚   â””â”€â”€ gift_transactions (purchases)
â”‚       â””â”€â”€ headcount_snapshots (final counts)
â”‚
â”œâ”€â”€ matchmaking_profiles (dating features)
â”‚   â”œâ”€â”€ matches (mutual likes)
â”‚   â”œâ”€â”€ likes (swipes)
â”‚   â”œâ”€â”€ messages (chat)
â”‚   â””â”€â”€ video_calls (call logs)
â”‚
â”œâ”€â”€ post_marriage_diary (couple journal)
â”œâ”€â”€ shared_goals (couple goals)
â”œâ”€â”€ date_nights (date planning)
â”œâ”€â”€ trips (travel planning)
â”‚
â”œâ”€â”€ community_posts (forum)
â”‚   â”œâ”€â”€ comments
â”‚   â””â”€â”€ votes
â”‚
â”œâ”€â”€ counselors (professional help)
â”‚   â”œâ”€â”€ counselor_sessions (bookings)
â”‚   â””â”€â”€ counselor_reviews (ratings)
â”‚
â””â”€â”€ notifications (system notifications)
```

### 3.2 Row Level Security (RLS) Architecture

**Security Model:**

```sql
-- Example RLS Policies

-- Users can only view their own profile
CREATE POLICY "Users can view own profile"
ON users FOR SELECT
USING (auth.uid() = id);

-- Couples can access their wedding data
CREATE POLICY "Couples can view their weddings"
ON weddings FOR SELECT
USING (
  EXISTS (
    SELECT 1 FROM couples 
    WHERE id = couple_id 
    AND auth.uid() IN (user1_id, user2_id)
  )
);

-- Guests can only view their assigned weddings
CREATE POLICY "Guests can view their weddings"
ON weddings FOR SELECT
USING (
  EXISTS (
    SELECT 1 FROM guests 
    WHERE wedding_id = weddings.id 
    AND user_id = auth.uid()
  )
);

-- Vendors can only view weddings they're invited to
CREATE POLICY "Vendors can view invited weddings"
ON weddings FOR SELECT
USING (
  EXISTS (
    SELECT 1 FROM vendor_bookings 
    WHERE wedding_id = weddings.id 
    AND vendor_id = auth.uid()
  )
);
```

### 3.3 Database Functions Architecture

**Critical Functions:**

1. **Invitation Management**
   - `generate_invite_code()` - Create unique 6-char codes
   - `validate_invitation()` - Check expiry & status
   - `accept_invitation()` - Update couple status

2. **Wedding Timeline**
   - `generate_event_timeline()` - Auto-create events
   - `calculate_event_dates()` - Date calculations

3. **Headcount Calculation**
   - `calculate_food_headcount()` - Food multiplier logic
   - `update_headcount_snapshot()` - Real-time updates
   - `lock_headcount()` - 7-day lock trigger

4. **Vendor Management**
   - `check_vendor_availability()` - Conflict detection
   - `calculate_vendor_rank()` - Ranking algorithm

5. **Matchmaking**
   - `calculate_match_probability()` - Success rate logic
   - `get_potential_matches()` - Filtering algorithm

### 3.4 Real-time Subscriptions

```typescript
// Real-time listeners for live updates

// 1. Guest RSVPs (for couple dashboard)
supabase
  .from('rsvps')
  .on('INSERT', payload => {
    // Update headcount live
  })
  .subscribe();

// 2. Vendor Quotes (for vendor comparison)
supabase
  .from('vendor_quotes')
  .on('*', payload => {
    // Refresh quotes list
  })
  .subscribe();

// 3. Game Submissions (for leaderboard)
supabase
  .from('game_submissions')
  .on('INSERT', payload => {
    // Update leaderboard
  })
  .subscribe();

// 4. Chat Messages (for matchmaking)
supabase
  .from('messages')
  .on('INSERT', payload => {
    // Show new message
  })
  .subscribe();
```

---

## 4. API ARCHITECTURE

### 4.1 Supabase Edge Functions

**Edge Functions Structure:**

```
supabase/functions/
â”œâ”€â”€ send-invitation-email/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ send-rsvp-reminder/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ process-payment/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ generate-wedding-card-pdf/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ send-bulk-whatsapp/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ calculate-vendor-ranking/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ cleanup-expired-invitations/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ lock-headcounts/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ delete-free-user-media/
â”‚   â””â”€â”€ index.ts
â””â”€â”€ send-anniversary-reminders/
    â””â”€â”€ index.ts
```

**Example Edge Function:**

```typescript
// supabase/functions/send-invitation-email/index.ts

import { serve } from "https://deno.land/std@0.168.0/http/server.ts";
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

serve(async (req) => {
  const { invitation_id } = await req.json();
  
  // Get invitation details
  const supabase = createClient(
    Deno.env.get('SUPABASE_URL'),
    Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')
  );
  
  const { data: invitation } = await supabase
    .from('partner_invitations')
    .select('*, sender:users(*)')
    .eq('id', invitation_id)
    .single();
  
  // Send email via Resend
  const response = await fetch('https://api.resend.com/emails', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${Deno.env.get('RESEND_API_KEY')}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      from: 'Emowed <noreply@emowed.com>',
      to: invitation.receiver_email,
      subject: `${invitation.sender.full_name} invited you to plan your wedding!`,
      html: `...email template...`,
    }),
  });
  
  return new Response(JSON.stringify({ success: true }), {
    headers: { 'Content-Type': 'application/json' },
  });
});
```

### 4.2 API Rate Limiting

```typescript
// Rate limiting strategy using Upstash Redis

const rateLimit = {
  // Invitation creation: 3 per hour per user
  invitation_create: { limit: 3, window: 3600 },
  
  // Guest invitation: 50 per hour per wedding
  guest_invite: { limit: 50, window: 3600 },
  
  // Media upload: 100 per day per user
  media_upload: { limit: 100, window: 86400 },
  
  // API calls: 1000 per hour per user
  api_general: { limit: 1000, window: 3600 },
};
```

---

## 5. DATA STORAGE ARCHITECTURE

### 5.1 Media Storage Strategy

```
Cloudinary Structure:

emowed/
â”œâ”€â”€ users/
â”‚   â””â”€â”€ {user_id}/
â”‚       â”œâ”€â”€ profile.jpg
â”‚       â””â”€â”€ verification_docs/
â”‚
â”œâ”€â”€ weddings/
â”‚   â””â”€â”€ {wedding_id}/
â”‚       â”œâ”€â”€ gallery/
â”‚       â”‚   â”œâ”€â”€ photos/
â”‚       â”‚   â”‚   â””â”€â”€ {timestamp}_{user_id}.jpg
â”‚       â”‚   â””â”€â”€ videos/
â”‚       â”‚       â””â”€â”€ {timestamp}_{user_id}.mp4
â”‚       â”œâ”€â”€ wedding_card/
â”‚       â”‚   â”œâ”€â”€ main_image.jpg
â”‚       â”‚   â””â”€â”€ animations/
â”‚       â””â”€â”€ vendor_work/
â”‚           â””â”€â”€ {vendor_id}/
â”‚
â”œâ”€â”€ matchmaking/
â”‚   â””â”€â”€ {user_id}/
â”‚       â”œâ”€â”€ photo1.jpg
â”‚       â”œâ”€â”€ photo2.jpg
â”‚       â””â”€â”€ verification/
â”‚
â””â”€â”€ vendors/
    â””â”€â”€ {vendor_id}/
        â””â”€â”€ portfolio/
```

**Media Processing Pipeline:**

```
Upload â†’ Cloudinary â†’ Transformation â†’ CDN â†’ Client

Transformations:
- Photos: Auto-format (webp), quality 80%, max 1920x1080
- Thumbnails: 300x300, crop, quality 70%
- Videos: Transcode to H.264, max 1080p
- Compression: Automatic based on device
```

### 5.2 Database Backup Strategy

```
Backup Schedule:
â”œâ”€â”€ Real-time: Supabase automatic backups (every 2 minutes)
â”œâ”€â”€ Daily: Full backup at 2 AM IST
â”œâ”€â”€ Weekly: Archive to AWS S3 (every Sunday)
â””â”€â”€ Monthly: Long-term archive (retained 1 year)

Recovery Point Objective (RPO): 2 minutes
Recovery Time Objective (RTO): 30 minutes
```

---

## 6. CACHING ARCHITECTURE

### 6.1 Multi-Layer Caching Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L1: Browser Cache (Service Worker)    â”‚
â”‚  - Static assets (7 days)              â”‚
â”‚  - API responses (5 minutes)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Cache Miss
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L2: CDN Cache (Cloudflare)            â”‚
â”‚  - Images (30 days)                    â”‚
â”‚  - Videos (30 days)                    â”‚
â”‚  - Static files (7 days)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Cache Miss
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L3: Redis Cache (Upstash)             â”‚
â”‚  - Query results (5 minutes)           â”‚
â”‚  - Session data (24 hours)             â”‚
â”‚  - Headcount snapshots (1 hour)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Cache Miss
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  L4: Database (Supabase)               â”‚
â”‚  - Source of truth                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Cache Invalidation Strategy

```typescript
// Cache invalidation triggers

// 1. On data mutation
const { data } = await supabase.from('guests').insert(newGuest);
await redis.del(`wedding:${weddingId}:guests`);

// 2. On real-time events
supabase
  .from('rsvps')
  .on('*', async (payload) => {
    await redis.del(`event:${payload.new.event_id}:headcount`);
  })
  .subscribe();

// 3. Time-based expiry (TTL)
await redis.set(
  `vendor:${vendorId}:quotes`,
  JSON.stringify(quotes),
  'EX',
  300 // 5 minutes
);
```

---

## 7. SECURITY ARCHITECTURE

### 7.1 Authentication Flow

```
User Login Flow:
1. User enters email + password
2. Frontend sends to Supabase Auth
3. Supabase validates credentials
4. Returns JWT access token + refresh token
5. Frontend stores tokens in localStorage
6. All API requests include Bearer token
7. Token auto-refreshes every 55 minutes

OAuth Flow (Google/Apple):
1. User clicks "Sign in with Google"
2. Redirect to Google OAuth
3. User grants permissions
4. Google returns auth code
5. Supabase exchanges code for tokens
6. User profile created/updated
7. Redirect to dashboard
```

### 7.2 Authorization Model

```
Role-Based Access Control (RBAC):

Roles:
â”œâ”€â”€ Guest (default)
â”‚   â”œâ”€â”€ View wedding details
â”‚   â”œâ”€â”€ Upload photos
â”‚   â”œâ”€â”€ RSVP to events
â”‚   â””â”€â”€ Play games
â”‚
â”œâ”€â”€ Family Member (Parent/Sibling)
â”‚   â”œâ”€â”€ All Guest permissions
â”‚   â”œâ”€â”€ Invite other guests
â”‚   â”œâ”€â”€ Vote on vendors
â”‚   â””â”€â”€ View family tree
â”‚
â”œâ”€â”€ Couple (Wedding Owners)
â”‚   â”œâ”€â”€ All Family permissions
â”‚   â”œâ”€â”€ Create/edit wedding
â”‚   â”œâ”€â”€ Invite vendors
â”‚   â”œâ”€â”€ Access analytics
â”‚   â”œâ”€â”€ Download media
â”‚   â””â”€â”€ Cancel wedding
â”‚
â”œâ”€â”€ Vendor
â”‚   â”œâ”€â”€ View wedding details
â”‚   â”œâ”€â”€ Submit quotes
â”‚   â”œâ”€â”€ Upload portfolio
â”‚   â””â”€â”€ Message couple
â”‚
â””â”€â”€ Admin (Emowed Team)
    â”œâ”€â”€ View all weddings
    â”œâ”€â”€ Moderate content
    â”œâ”€â”€ Manage users
    â””â”€â”€ Access analytics
```

### 7.3 Data Encryption

```
Encryption Strategy:

At Rest:
â”œâ”€â”€ Database: AES-256 (Supabase default)
â”œâ”€â”€ File Storage: AES-256 (Cloudinary)
â””â”€â”€ Backups: Encrypted with separate key

In Transit:
â”œâ”€â”€ HTTPS/TLS 1.3 for all connections
â”œâ”€â”€ WebSocket Secure (WSS) for real-time
â””â”€â”€ Certificate pinning for mobile apps

Sensitive Data:
â”œâ”€â”€ Phone numbers: Encrypted before storage
â”œâ”€â”€ Payment info: Tokenized (Razorpay)
â””â”€â”€ Passwords: Bcrypt hashed (Supabase Auth)
```

### 7.4 Security Headers

```typescript
// Security headers configuration

headers: {
  'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',
  'X-Frame-Options': 'DENY',
  'X-Content-Type-Options': 'nosniff',
  'X-XSS-Protection': '1; mode=block',
  'Referrer-Policy': 'strict-origin-when-cross-origin',
  'Permissions-Policy': 'geolocation=(), microphone=(), camera=()',
  'Content-Security-Policy': `
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: https://res.cloudinary.com;
    connect-src 'self' https://*.supabase.co wss://*.supabase.co;
  `
}
```

---

## 8. SCALABILITY ARCHITECTURE

### 8.1 Horizontal Scaling Strategy

```
User Load Distribution:

1-1,000 Users:
â”œâ”€â”€ Supabase Free Tier
â”œâ”€â”€ Single database instance
â””â”€â”€ No load balancer needed

1,000-10,000 Users:
â”œâ”€â”€ Supabase Pro
â”œâ”€â”€ Read replicas (2x)
â”œâ”€â”€ Connection pooling
â””â”€â”€ CDN for static assets

10,000-100,000 Users:
â”œâ”€â”€ Supabase Team
â”œâ”€â”€ Read replicas (5x)
â”œâ”€â”€ Database sharding (by region)
â”œâ”€â”€ Redis cluster (3 nodes)
â””â”€â”€ Multiple CDN regions

100,000+ Users:
â”œâ”€â”€ Supabase Enterprise
â”œâ”€â”€ Multi-region deployment
â”œâ”€â”€ Global load balancer
â”œâ”€â”€ Database federation
â””â”€â”€ Microservices architecture
```

### 8.2 Database Sharding Strategy

```
Sharding by Wedding Date:

Shard 1: Weddings in Jan-Mar
Shard 2: Weddings in Apr-Jun
Shard 3: Weddings in Jul-Sep
Shard 4: Weddings in Oct-Dec

Benefits:
- Older weddings (completed) can be archived
- Hot data (upcoming weddings) stays fast
- Easy to scale during wedding season
```

### 8.3 Performance Optimization

```
Performance Targets:

Page Load:
â”œâ”€â”€ First Contentful Paint: < 1.5s
â”œâ”€â”€ Time to Interactive: < 3.0s
â”œâ”€â”€ Largest Contentful Paint: < 2.5s
â””â”€â”€ Cumulative Layout Shift: < 0.1

API Response:
â”œâ”€â”€ Simple queries: < 100ms
â”œâ”€â”€ Complex queries: < 500ms
â”œâ”€â”€ File uploads: < 2s (per MB)
â””â”€â”€ Real-time updates: < 50ms

Database:
â”œâ”€â”€ Query execution: < 50ms (average)
â”œâ”€â”€ Index usage: 95%+
â””â”€â”€ Connection pool: 80% utilization
```

---

## 9. MONITORING & OBSERVABILITY

### 9.1 Monitoring Stack

```
Application Monitoring:
â”œâ”€â”€ Sentry (Error tracking)
â”‚   â”œâ”€â”€ JavaScript errors
â”‚   â”œâ”€â”€ Backend errors
â”‚   â”œâ”€â”€ Performance metrics
â”‚   â””â”€â”€ Release tracking
â”‚
â”œâ”€â”€ Mixpanel (Product analytics)
â”‚   â”œâ”€â”€ User behavior
â”‚   â”œâ”€â”€ Conversion funnels
â”‚   â”œâ”€â”€ Cohort analysis
â”‚   â””â”€â”€ Revenue tracking
â”‚
â”œâ”€â”€ Google Analytics 4 (Web analytics)
â”‚   â”œâ”€â”€ Page views
â”‚   â”œâ”€â”€ Traffic sources
â”‚   â”œâ”€â”€ User demographics
â”‚   â””â”€â”€ Goal tracking
â”‚
â””â”€â”€ Supabase Dashboard (Infrastructure)
    â”œâ”€â”€ Database performance
    â”œâ”€â”€ API usage
    â”œâ”€â”€ Storage metrics
    â””â”€â”€ Auth statistics
```

### 9.2 Alerting Strategy

```
Critical Alerts (PagerDuty):
â”œâ”€â”€ Database down
â”œâ”€â”€ API error rate > 5%
â”œâ”€â”€ Payment processing failure
â””â”€â”€ Security breach

Warning Alerts (Email):
â”œâ”€â”€ API response time > 1s
â”œâ”€â”€ Database CPU > 80%
â”œâ”€â”€ Storage > 90% capacity
â””â”€â”€ High rate limiting hits

Info Alerts (Dashboard):
â”œâ”€â”€ New user signups
â”œâ”€â”€ Wedding creations
â”œâ”€â”€ Payment transactions
â””â”€â”€ Feature usage trends
```

---

## 10. DEPLOYMENT ARCHITECTURE

### 10.1 CI/CD Pipeline

```
GitHub Repository
        â†“
    Push to main
        â†“
GitHub Actions Workflow
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Install deps       â”‚
    â”‚ 2. Run tests          â”‚
    â”‚ 3. Run linter         â”‚
    â”‚ 4. Build production   â”‚
    â”‚ 5. Deploy to Vercel   â”‚
    â”‚ 6. Run E2E tests      â”‚
    â”‚ 7. Notify Slack       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    Production (Vercel)
```

### 10.2 Environment Strategy

```
Environments:

1. Development (Local)
   â”œâ”€â”€ localhost:3000
   â”œâ”€â”€ Supabase local (Docker)
   â””â”€â”€ Mock external services

2. Staging (Vercel)
   â”œâ”€â”€ staging.emowed.com
   â”œâ”€â”€ Supabase staging project
   â””â”€â”€ Test external services

3. Production (Vercel)
   â”œâ”€â”€ emowed.com
   â”œâ”€â”€ Supabase production project
   â””â”€â”€ Live external services
```

### 10.3 Rollback Strategy

```
Rollback Procedure:

1. Immediate Rollback (< 5 minutes)
   â”œâ”€â”€ Revert to previous Vercel deployment
   â”œâ”€â”€ No database changes needed
   â””â”€â”€ Automated via Vercel dashboard

2. Database Rollback (< 30 minutes)
   â”œâ”€â”€ Restore from Supabase backup
   â”œâ”€â”€ Manual intervention required
   â””â”€â”€ Notify all users

3. Hotfix Deployment (< 1 hour)
   â”œâ”€â”€ Create fix branch
   â”œâ”€â”€ Deploy to staging
   â”œâ”€â”€ Test thoroughly
   â””â”€â”€ Deploy to production
```

---

## 11. COST ARCHITECTURE

### 11.1 Cost Breakdown by Phase

**Phase 1: 0-100 Weddings**
```
Infrastructure:
â”œâ”€â”€ Vercel (Hobby): $0
â”œâ”€â”€ Supabase (Free): $0
â”œâ”€â”€ Cloudinary (Free): $0
â”œâ”€â”€ Domain: $12/year
â””â”€â”€ Total: $12/year ($1/month)

Per Wedding Revenue: â‚¹84,999
Break-even: 1 wedding
```

**Phase 2: 100-1,000 Weddings**
```
Infrastructure:
â”œâ”€â”€ Vercel (Pro): $20/month
â”œâ”€â”€ Supabase (Pro): $25/month
â”œâ”€â”€ Cloudinary (Plus): $99/month
â”œâ”€â”€ Redis (Upstash): $10/month
â”œâ”€â”€ Resend (Pro): $20/month
â”œâ”€â”€ Sentry (Team): $26/month
â””â”€â”€ Total: $200/month

Annual Revenue: â‚¹8.5 Crore
Annual Cost: $2,400 (â‚¹2 Lakh)
Profit Margin: 97.6%
```

**Phase 3: 1,000-10,000 Weddings**
```
Infrastructure:
â”œâ”€â”€ Vercel (Enterprise): $500/month
â”œâ”€â”€ Supabase (Team): $599/month
â”œâ”€â”€ Cloudinary (Advanced): $299/month
â”œâ”€â”€ Redis (Standard): $50/month
â”œâ”€â”€ Resend (Business): $100/month
â”œâ”€â”€ Twilio: $200/month
â”œâ”€â”€ Sentry (Business): $99/month
â”œâ”€â”€ Mixpanel (Growth): $100/month
â””â”€â”€ Total: $1,947/month

Annual Revenue: â‚¹85 Crore
Annual Cost: $23,364 (â‚¹19.5 Lakh)
Profit Margin: 97.7%
```

### 11.2 Cost Optimization Strategies

```
1. Media Storage Optimization
   â”œâ”€â”€ Auto-delete free user media after 7 days
   â”œâ”€â”€ Compress images (webp, quality 80%)
   â”œâ”€â”€ Video transcoding (max 1080p)
   â””â”€â”€ Savings: 60% storage costs

2. Database Optimization
   â”œâ”€â”€ Archive old weddings (>1 year) to cold storage
   â”œâ”€â”€ Use materialized views for heavy queries
   â”œâ”€â”€ Connection pooling (reduce connections by 70%)
   â””â”€â”€ Savings: 40% database costs

3. CDN Optimization
   â”œâ”€â”€ Aggressive caching (30-day TTL)
   â”œâ”€â”€ Image transformations at edge
   â”œâ”€â”€ Lazy loading for images
   â””â”€â”€ Savings: 50% bandwidth costs

4. API Optimization
   â”œâ”€â”€ Rate limiting (prevent abuse)
   â”œâ”€â”€ Query batching (reduce API calls)
   â”œâ”€â”€ GraphQL over REST (fetch only needed data)
   â””â”€â”€ Savings: 30% API costs
```

---

## 12. DISASTER RECOVERY

### 12.1 Backup Strategy

```
Data Backup:
â”œâ”€â”€ Database: Point-in-time recovery (2-minute intervals)
â”œâ”€â”€ Media: Replicated across 3 regions
â”œâ”€â”€ Configs: Version controlled in Git
â””â”€â”€ User data: Encrypted backups daily

Recovery Procedures:
â”œâ”€â”€ Database restore: < 30 minutes
â”œâ”€â”€ Media restore: < 1 hour
â”œâ”€â”€ Full system restore: < 2 hours
â””â”€â”€ Tested quarterly
```

### 12.2 High Availability

```
Uptime Targets:
â”œâ”€â”€ API: 99.9% (< 9 hours downtime/year)
â”œâ”€â”€ Database: 99.95% (< 4 hours downtime/year)
â”œâ”€â”€ Storage: 99.99% (< 1 hour downtime/year)
â””â”€â”€ Overall: 99.9% SLA

Redundancy:
â”œâ”€â”€ Multi-region deployment
â”œâ”€â”€ Database read replicas (3x)
â”œâ”€â”€ CDN with 200+ edge locations
â””â”€â”€ Automatic failover (< 1 minute)
```

---

## 13. TECHNOLOGY DECISIONS RATIONALE

### 13.1 Why React + TypeScript?

**Pros:**
âœ… Large ecosystem (npm packages)
âœ… Component reusability
âœ… Type safety (catch bugs early)
âœ… Hot module replacement (fast dev)
âœ… Excellent mobile support (React Native later)
âœ… Strong community & hiring pool

**Cons:**
âŒ Bundle size (mitigated with code splitting)
âŒ SEO challenges (solved with SSR/SSG)

### 13.2 Why Supabase?

**Pros:**
âœ… PostgreSQL (battle-tested, reliable)
âœ… Real-time built-in (no custom WebSocket)
âœ… Auth included (saves 2 weeks dev time)
âœ… Row Level Security (secure by default)
âœ… Auto-generated APIs (REST & GraphQL)
âœ… Cost-effective ($0 to start)

**Cons:**
âŒ Vendor lock-in (mitigated: self-hostable)
âŒ Limited customization (acceptable for MVP)

### 13.3 Why Lovable.dev?

**Pros:**
âœ… 10x faster development
âœ… AI-powered code generation
âœ… Built-in best practices
âœ… Automatic TypeScript types
âœ… Integrated with Supabase
âœ… Perfect for MVPs

**Cons:**
âŒ Limited to supported tech stack (acceptable)
âŒ Requires refinement with Claude Code (planned)

### 13.4 Why Cloudinary?

**Pros:**
âœ… Automatic image optimization
âœ… CDN included
âœ… Video transcoding
âœ… Easy transformations
âœ… Free tier generous (25GB)
âœ… Used by Netflix, Airbnb

**Cons:**
âŒ Cost at scale (mitigated: delete old media)

---

## 14. FUTURE ARCHITECTURE CONSIDERATIONS

### 14.1 Mobile App Strategy

```
Phase 1: PWA (Progressive Web App)
â”œâ”€â”€ Install prompt on mobile
â”œâ”€â”€ Offline support
â”œâ”€â”€ Push notifications
â””â”€â”€ 80% native feel

Phase 2: React Native App
â”œâ”€â”€ iOS + Android
â”œâ”€â”€ Code sharing with web (90%)
â”œâ”€â”€ Native features (camera, contacts)
â””â”€â”€ App Store distribution

Benefits:
âœ… Single codebase
âœ… Faster development
âœ… Shared components
```

### 14.2 Internationalization (i18n)

```
Languages (Priority):
1. English (India) - Primary
2. Hindi - Phase 2
3. Tamil - Phase 3
4. Telugu - Phase 3
5. Bengali - Phase 3

Implementation:
â”œâ”€â”€ react-i18next library
â”œâ”€â”€ JSON translation files
â”œâ”€â”€ Currency formatting (â‚¹ vs $)
â”œâ”€â”€ Date formatting (DD/MM/YYYY vs MM/DD/YYYY)
â””â”€â”€ RTL support (future: Arabic)
```

### 14.3 AI/ML Features (Future)

```
Potential AI Features:

1. Smart Guest List Suggestions
   â”œâ”€â”€ Analyze past weddings
   â”œâ”€â”€ Suggest similar guest counts
   â””â”€â”€ Predict no-shows

2. Vendor Recommendations
   â”œâ”€â”€ ML-based matching
   â”œâ”€â”€ Price prediction
   â””â”€â”€ Quality scoring

3. Photo Auto-Tagging
   â”œâ”€â”€ Face recognition
   â”œâ”€â”€ Auto-organize by person
   â””â”€â”€ Privacy-compliant

4. Chatbot Assistant
   â”œâ”€â”€ Answer wedding FAQs
   â”œâ”€â”€ Help with planning
   â””â”€â”€ 24/7 support
```

---

## 15. COMPLIANCE & LEGAL

### 15.1 Data Privacy

```
GDPR Compliance (if expanding to EU):
â”œâ”€â”€ User consent management
â”œâ”€â”€ Right to access data
â”œâ”€â”€ Right to deletion
â”œâ”€â”€ Data portability
â””â”€â”€ Privacy policy

Indian IT Act 2000:
â”œâ”€â”€ Data protection
â”œâ”€â”€ Secure storage
â”œâ”€â”€ User consent
â””â”€â”€ Terms of service
```

### 15.2 Payment Compliance

```
PCI DSS Compliance:
â”œâ”€â”€ No card data stored (Razorpay handles)
â”œâ”€â”€ Tokenization only
â”œâ”€â”€ HTTPS enforced
â””â”€â”€ Regular security audits

RBI Guidelines:
â”œâ”€â”€ Two-factor authentication
â”œâ”€â”€ Transaction limits
â”œâ”€â”€ Fraud detection
â””â”€â”€ Refund policies
```

---

## CONCLUSION

This architecture is designed to:

âœ… **Scale** from 0 to 100,000+ users
âœ… **Cost-effective** with 97%+ profit margins
âœ… **Secure** with multiple layers of protection
âœ… **Fast** with multi-layer caching
âœ… **Reliable** with 99.9% uptime
âœ… **Maintainable** with clean code structure
âœ… **Future-proof** with modular design

**Next Steps:**
1. Implement Phase 1 using this architecture
2. Monitor performance metrics
3. Optimize based on real user data
4. Scale infrastructure as needed
5. Add AI features in Phase 4+

This architecture supports the ambitious goal of becoming India's #1 relationship platform! ğŸš€

