# PHASE 4: Digital Wedding Program & Media

## OVERVIEW

**Goal:** Guest engagement, content sharing, streaming, gallery management, storage policies

**Timeline:** Weeks 10-12

**Prerequisites:** Phase 3 complete (vendor system functional)

---

## DATABASE SCHEMA

### wedding_cards table
```sql
CREATE TABLE wedding_cards (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  template_id TEXT,
  custom_design BOOLEAN DEFAULT FALSE,
  groom_name TEXT NOT NULL,
  bride_name TEXT NOT NULL,
  wedding_date DATE NOT NULL,
  venue_name TEXT,
  venue_address TEXT,
  city TEXT,
  ceremony_time TIME,
  reception_time TIME,
  custom_message TEXT,
  background_image_url TEXT,
  couple_image_url TEXT,
  animation_type TEXT CHECK (animation_type IN ('fade', 'slide', 'hearts', 'flowers', 'custom_gif', 'none')),
  custom_gif_url TEXT,
  color_scheme JSONB,
  font_style TEXT,
  pdf_url TEXT,
  card_status TEXT DEFAULT 'draft' CHECK (card_status IN ('draft', 'published')),
  views_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(wedding_id)
);

CREATE INDEX idx_wedding_cards_wedding ON wedding_cards(wedding_id);
CREATE INDEX idx_wedding_cards_status ON wedding_cards(card_status);
```

### event_programs table
```sql
CREATE TABLE event_programs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  program_order INTEGER,
  program_title TEXT NOT NULL,
  program_description TEXT,
  start_time TIME,
  end_time TIME,
  duration_minutes INTEGER,
  responsible_person TEXT,
  special_notes TEXT,
  is_live BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_event_programs_event ON event_programs(event_id);
CREATE INDEX idx_event_programs_order ON event_programs(program_order);
```

### menu_items table
```sql
CREATE TABLE menu_items (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  event_id UUID REFERENCES events(id),
  meal_type TEXT CHECK (meal_type IN ('breakfast', 'lunch', 'snacks', 'dinner', 'desserts', 'beverages')),
  category TEXT CHECK (category IN ('starters', 'main_course', 'breads', 'rice', 'desserts', 'drinks', 'live_counter')),
  item_name TEXT NOT NULL,
  description TEXT,
  cuisine_type TEXT,
  is_vegetarian BOOLEAN DEFAULT TRUE,
  is_vegan BOOLEAN DEFAULT FALSE,
  is_halal BOOLEAN DEFAULT FALSE,
  is_gluten_free BOOLEAN DEFAULT FALSE,
  spice_level TEXT CHECK (spice_level IN ('mild', 'medium', 'hot', 'extra_hot')),
  is_live_counter BOOLEAN DEFAULT FALSE,
  display_order INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_menu_items_wedding ON menu_items(wedding_id);
CREATE INDEX idx_menu_items_event ON menu_items(event_id);
CREATE INDEX idx_menu_items_meal_type ON menu_items(meal_type);
```

### youtube_streams table
```sql
CREATE TABLE youtube_streams (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  event_id UUID REFERENCES events(id) ON DELETE CASCADE,
  stream_title TEXT NOT NULL,
  youtube_url TEXT NOT NULL,
  embed_code TEXT NOT NULL,
  stream_type TEXT CHECK (stream_type IN ('live', 'recorded', 'upcoming')),
  stream_status TEXT DEFAULT 'scheduled' CHECK (stream_status IN ('scheduled', 'live', 'ended', 'private')),
  scheduled_start TIMESTAMP,
  actual_start TIMESTAMP,
  actual_end TIMESTAMP,
  viewer_count INTEGER DEFAULT 0,
  peak_viewers INTEGER DEFAULT 0,
  chat_enabled BOOLEAN DEFAULT TRUE,
  recording_url TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_youtube_streams_wedding ON youtube_streams(wedding_id);
CREATE INDEX idx_youtube_streams_event ON youtube_streams(event_id);
CREATE INDEX idx_youtube_streams_status ON youtube_streams(stream_status);
```

### media_gallery table
```sql
CREATE TABLE media_gallery (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  event_id UUID REFERENCES events(id),
  uploader_id UUID REFERENCES users(id) ON DELETE CASCADE,
  uploader_name TEXT NOT NULL,
  uploader_side TEXT CHECK (uploader_side IN ('groom', 'bride', 'guest')),
  media_type TEXT NOT NULL CHECK (media_type IN ('photo', 'video', 'message', 'blessing')),
  file_url TEXT,
  thumbnail_url TEXT,
  cloudinary_public_id TEXT,
  file_size_bytes BIGINT,
  file_format TEXT,
  width INTEGER,
  height INTEGER,
  duration_seconds INTEGER,
  caption TEXT,
  message_text TEXT,
  blessing_text TEXT,
  tags TEXT[],
  is_approved BOOLEAN DEFAULT TRUE,
  is_featured BOOLEAN DEFAULT FALSE,
  likes_count INTEGER DEFAULT 0,
  comments_count INTEGER DEFAULT 0,
  view_count INTEGER DEFAULT 0,
  upload_date TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_media_gallery_wedding ON media_gallery(wedding_id);
CREATE INDEX idx_media_gallery_uploader ON media_gallery(uploader_id);
CREATE INDEX idx_media_gallery_type ON media_gallery(media_type);
CREATE INDEX idx_media_gallery_approved ON media_gallery(is_approved);
CREATE INDEX idx_media_gallery_date ON media_gallery(upload_date);
```

### media_comments table
```sql
CREATE TABLE media_comments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  media_id UUID REFERENCES media_gallery(id) ON DELETE CASCADE,
  commenter_id UUID REFERENCES users(id) ON DELETE CASCADE,
  commenter_name TEXT NOT NULL,
  comment_text TEXT NOT NULL,
  parent_comment_id UUID REFERENCES media_comments(id),
  likes_count INTEGER DEFAULT 0,
  is_approved BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_media_comments_media ON media_comments(media_id);
CREATE INDEX idx_media_comments_parent ON media_comments(parent_comment_id);
```

### media_likes table
```sql
CREATE TABLE media_likes (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  media_id UUID REFERENCES media_gallery(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(media_id, user_id)
);

CREATE INDEX idx_media_likes_media ON media_likes(media_id);
CREATE INDEX idx_media_likes_user ON media_likes(user_id);
```

### storage_usage table
```sql
CREATE TABLE storage_usage (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  total_photos INTEGER DEFAULT 0,
  total_videos INTEGER DEFAULT 0,
  total_files INTEGER DEFAULT 0,
  total_size_bytes BIGINT DEFAULT 0,
  total_size_mb DECIMAL(10, 2) DEFAULT 0,
  storage_limit_mb DECIMAL(10, 2),
  is_paid_user BOOLEAN DEFAULT FALSE,
  last_calculated TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(wedding_id)
);

CREATE INDEX idx_storage_usage_wedding ON storage_usage(wedding_id);
CREATE INDEX idx_storage_usage_paid ON storage_usage(is_paid_user);
```

### media_deletion_schedule table
```sql
CREATE TABLE media_deletion_schedule (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  wedding_date DATE NOT NULL,
  deletion_scheduled_date DATE NOT NULL,
  deletion_executed BOOLEAN DEFAULT FALSE,
  deletion_executed_at TIMESTAMP,
  is_paid_wedding BOOLEAN DEFAULT FALSE,
  items_deleted_count INTEGER DEFAULT 0,
  space_freed_mb DECIMAL(10, 2) DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_media_deletion_wedding ON media_deletion_schedule(wedding_id);
CREATE INDEX idx_media_deletion_scheduled ON media_deletion_schedule(deletion_scheduled_date);
CREATE INDEX idx_media_deletion_executed ON media_deletion_schedule(deletion_executed);
```

### couple_animations table
```sql
CREATE TABLE couple_animations (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  animation_type TEXT CHECK (animation_type IN ('text_fade', 'hearts', 'flowers', 'rings', 'custom_gif')),
  custom_gif_url TEXT,
  animation_settings JSONB,
  display_duration_seconds INTEGER DEFAULT 5,
  loop_animation BOOLEAN DEFAULT TRUE,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### bulk_download_requests table
```sql
CREATE TABLE bulk_download_requests (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  wedding_id UUID REFERENCES weddings(id) ON DELETE CASCADE,
  requester_id UUID REFERENCES users(id) ON DELETE CASCADE,
  download_type TEXT CHECK (download_type IN ('all_media', 'photos_only', 'videos_only', 'event_specific')),
  event_id UUID REFERENCES events(id),
  filter_criteria JSONB,
  total_files INTEGER,
  total_size_mb DECIMAL(10, 2),
  zip_file_url TEXT,
  zip_file_password TEXT,
  status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'ready', 'downloaded', 'expired')),
  expires_at TIMESTAMP,
  downloaded_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_bulk_downloads_wedding ON bulk_download_requests(wedding_id);
CREATE INDEX idx_bulk_downloads_requester ON bulk_download_requests(requester_id);
CREATE INDEX idx_bulk_downloads_status ON bulk_download_requests(status);
```

---

## FUNCTIONS & TRIGGERS

### Calculate storage usage
```sql
CREATE OR REPLACE FUNCTION calculate_storage_usage(p_wedding_id UUID)
RETURNS VOID AS $$
DECLARE
  v_total_photos INTEGER;
  v_total_videos INTEGER;
  v_total_size BIGINT;
  v_is_paid BOOLEAN;
BEGIN
  SELECT 
    COUNT(*) FILTER (WHERE media_type = 'photo'),
    COUNT(*) FILTER (WHERE media_type = 'video'),
    COALESCE(SUM(file_size_bytes), 0)
  INTO v_total_photos, v_total_videos, v_total_size
  FROM media_gallery
  WHERE wedding_id = p_wedding_id;

  SELECT EXISTS (
    SELECT 1 FROM weddings w
    JOIN couples c ON w.couple_id = c.id
    JOIN users u ON u.id IN (c.user1_id, c.user2_id)
    WHERE w.id = p_wedding_id
    AND u.subscription_type = 'paid'
    LIMIT 1
  ) INTO v_is_paid;

  INSERT INTO storage_usage (
    wedding_id, total_photos, total_videos, 
    total_files, total_size_bytes, total_size_mb,
    is_paid_user, storage_limit_mb
  )
  VALUES (
    p_wedding_id, v_total_photos, v_total_videos,
    v_total_photos + v_total_videos, v_total_size,
    v_total_size / 1048576.0,
    v_is_paid,
    CASE WHEN v_is_paid THEN 999999 ELSE 500 END
  )
  ON CONFLICT (wedding_id) DO UPDATE SET
    total_photos = EXCLUDED.total_photos,
    total_videos = EXCLUDED.total_videos,
    total_files = EXCLUDED.total_files,
    total_size_bytes = EXCLUDED.total_size_bytes,
    total_size_mb = EXCLUDED.total_size_mb,
    last_calculated = NOW();
END;
$$ LANGUAGE plpgsql;
```

### Update storage on media upload
```sql
CREATE OR REPLACE FUNCTION update_storage_on_upload()
RETURNS TRIGGER AS $$
BEGIN
  PERFORM calculate_storage_usage(NEW.wedding_id);
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER after_media_upload
AFTER INSERT ON media_gallery
FOR EACH ROW
EXECUTE FUNCTION update_storage_on_upload();
```

### Schedule media deletion for free users
```sql
CREATE OR REPLACE FUNCTION schedule_media_deletion()
RETURNS TRIGGER AS $$
DECLARE
  v_is_paid BOOLEAN;
  v_deletion_date DATE;
BEGIN
  SELECT is_paid_user INTO v_is_paid
  FROM storage_usage
  WHERE wedding_id = NEW.wedding_id;

  IF v_is_paid = FALSE THEN
    v_deletion_date := NEW.wedding_date + INTERVAL '7 days';
    
    INSERT INTO media_deletion_schedule (
      wedding_id, wedding_date, deletion_scheduled_date, is_paid_wedding
    )
    VALUES (
      NEW.wedding_id, NEW.wedding_date, v_deletion_date, FALSE
    )
    ON CONFLICT (wedding_id) DO NOTHING;
  END IF;

  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER after_wedding_completion
AFTER UPDATE ON weddings
FOR EACH ROW
WHEN (NEW.status = 'completed' AND OLD.status != 'completed')
EXECUTE FUNCTION schedule_media_deletion();
```

### Execute scheduled deletions
```sql
CREATE OR REPLACE FUNCTION execute_media_deletions()
RETURNS VOID AS $$
DECLARE
  v_record RECORD;
  v_deleted_count INTEGER;
  v_space_freed BIGINT;
BEGIN
  FOR v_record IN 
    SELECT * FROM media_deletion_schedule
    WHERE deletion_scheduled_date <= CURRENT_DATE
    AND deletion_executed = FALSE
    AND is_paid_wedding = FALSE
  LOOP
    SELECT COUNT(*), COALESCE(SUM(file_size_bytes), 0)
    INTO v_deleted_count, v_space_freed
    FROM media_gallery
    WHERE wedding_id = v_record.wedding_id;

    DELETE FROM media_gallery
    WHERE wedding_id = v_record.wedding_id;

    UPDATE media_deletion_schedule
    SET deletion_executed = TRUE,
        deletion_executed_at = NOW(),
        items_deleted_count = v_deleted_count,
        space_freed_mb = v_space_freed / 1048576.0
    WHERE id = v_record.id;
  END LOOP;
END;
$$ LANGUAGE plpgsql;
```

### Update media likes count
```sql
CREATE OR REPLACE FUNCTION update_media_likes_count()
RETURNS TRIGGER AS $$
BEGIN
  IF TG_OP = 'INSERT' THEN
    UPDATE media_gallery
    SET likes_count = likes_count + 1
    WHERE id = NEW.media_id;
  ELSIF TG_OP = 'DELETE' THEN
    UPDATE media_gallery
    SET likes_count = likes_count - 1
    WHERE id = OLD.media_id;
  END IF;
  RETURN NULL;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER after_media_like
AFTER INSERT OR DELETE ON media_likes
FOR EACH ROW
EXECUTE FUNCTION update_media_likes_count();
```

### Increment media view count
```sql
CREATE OR REPLACE FUNCTION increment_media_view()
RETURNS TRIGGER AS $$
BEGIN
  UPDATE media_gallery
  SET view_count = view_count + 1
  WHERE id = NEW.media_id;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

---

## USER FLOWS

### Flow 1: Create Digital Wedding Card

**Trigger:** Couple wants to share wedding details digitally

**Steps:**
1. Navigate to Wedding Card section
2. Choose creation method:
   - Use template (free/paid)
   - Upload custom design
   - Upload PDF
3. If template selected:
   - Choose from gallery (religious themes, modern, traditional)
   - Customize colors, fonts
4. Fill in details:
   - Groom name, Bride name
   - Wedding date, venue, city
   - Ceremony time, reception time
   - Custom message
5. Upload couple photo (optional)
6. Choose animation:
   - Free users: Fade, slide, hearts, flowers
   - Paid users: Custom GIF upload
7. Preview card
8. Publish card
9. System generates shareable link
10. Couple shares link with guests

**Template Categories:**
- Hindu Traditional (Om, Ganesh, Mandala)
- Muslim Traditional (Islamic patterns, Bismillah)
- Christian Traditional (Cross, Church)
- Modern Minimal (Clean, elegant)
- Floral (Roses, jasmine, marigold)
- Royal (Gold, red, ornate)

**Card Details Form:**
```
Wedding Card Builder

Template: [Hindu Traditional - Ganesh â–¼]

Couple Names:
Groom: [Faseen Farook________________]
Bride: [Hanan Rasheed________________]

Display as:
â—‹ Faseen & Hanan
â—‹ Faseen weds Hanan
â—‹ Faseen â¤ï¸ Hanan
â— Custom: [Faseen ðŸ’ Hanan_________]

Wedding Date: [ðŸ“… Dec 15, 2025]

Venue Details:
Name: [Grand Palace Hotel_________]
Address: [123 Marine Drive________]
City: [Mumbai__________________]

Timings:
Ceremony: [ðŸ• 12:00 PM]
Reception: [ðŸ• 7:00 PM]

Custom Message:
[Join us in celebrating our union as we begin
 this beautiful journey together. Your presence
 will make our day even more special._________]

Couple Photo:
[ðŸ“¤ Upload] [Use placeholder]

Animation Type:
â—‹ Fade
â—‹ Slide
â— Hearts animation
â—‹ Flowers
â—‹ Custom GIF (Paid only)

Color Scheme:
Primary: [#FF6B9D] ðŸŽ¨
Secondary: [#FFD700] ðŸŽ¨
Background: [#FFF5F7] ðŸŽ¨

[Preview Card] [Save Draft] [Publish]
```

**Card Preview:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         ðŸ•‰ OM ðŸ•‰                    â”‚
â”‚                                     â”‚
â”‚      â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸          â”‚
â”‚                                     â”‚
â”‚         Faseen ðŸ’ Hanan             â”‚
â”‚                                     â”‚
â”‚      â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸ â¤ï¸          â”‚
â”‚                                     â”‚
â”‚    [Couple Photo]                   â”‚
â”‚                                     â”‚
â”‚   Join us in celebrating our union  â”‚
â”‚                                     â”‚
â”‚   ðŸ“… December 15, 2025              â”‚
â”‚   ðŸ“ Grand Palace Hotel             â”‚
â”‚      Mumbai                         â”‚
â”‚                                     â”‚
â”‚   ðŸ• Ceremony: 12:00 PM             â”‚
â”‚   ðŸ• Reception: 7:00 PM             â”‚
â”‚                                     â”‚
â”‚      Your presence will make        â”‚
â”‚      our day special                â”‚
â”‚                                     â”‚
â”‚   [View Full Invitation]            â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flow 2: Create Event Program Schedule

**Trigger:** Couple wants to display event timeline

**Steps:**
1. Navigate to Event Programs
2. Select event (Mehendi, Sangeet, Wedding, etc.)
3. Click Add Program Item
4. Fill program details:
   - Title
   - Description
   - Start time
   - Duration
   - Responsible person
   - Special notes
5. Set display order (drag-and-drop)
6. Mark live programs (happening now)
7. Publish program schedule
8. Guests see real-time updates on their app
9. Send push notifications for major programs

**Program Builder:**
```
Wedding Ceremony Schedule
Date: December 15, 2025

[+ Add Program Item]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  12:00 PM - 12:30 PM (30 min)       â”‚
â”‚  Guest Arrival & Registration       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  Welcome drinks and seating         â”‚
â”‚  Host: Reception Team               â”‚
â”‚  [Edit] [Delete] [â˜° Reorder]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  12:30 PM - 1:00 PM (30 min)        â”‚
â”‚  Baraat Procession                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  Groom's entry with family          â”‚
â”‚  DJ: Sound Masters                  â”‚
â”‚  ðŸ”´ LIVE NOW                        â”‚
â”‚  [Edit] [Delete] [â˜° Reorder]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1:00 PM - 2:00 PM (60 min)         â”‚
â”‚  Nikah Ceremony                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  Officiated by Imam Sahab           â”‚
â”‚  Please maintain silence            â”‚
â”‚  [Edit] [Delete] [â˜° Reorder]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2:00 PM - 3:30 PM (90 min)         â”‚
â”‚  Lunch Buffet                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  Multi-cuisine spread               â”‚
â”‚  Caterer: Royal Caterers            â”‚
â”‚  [Edit] [Delete] [â˜° Reorder]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Publish Schedule] [Preview Guest View]
```

**Add Program Form:**
```
Add Program Item

Title: [Baraat Procession__________]

Description:
[Groom's grand entry with family and friends
 accompanied by dhol and DJ_________________]

Time:
Start: [ðŸ• 12:30 PM]
Duration: [30] minutes
End: (Auto: 1:00 PM)

Responsible Person:
[DJ: Sound Masters______________]

Special Notes:
[All guests please gather at the entrance.
 Photography allowed._____________________]

Status:
[ ] Upcoming
[âœ“] Live Now
[ ] Completed

[Save] [Cancel]
```

---

### Flow 3: Create Buffet Menu

**Trigger:** Couple wants to display food menu

**Steps:**
1. Navigate to Menu Management
2. Select event (if multi-event)
3. Add meal sections:
   - Breakfast, Lunch, Snacks, Dinner, Desserts, Beverages
4. For each section, add items:
   - Item name
   - Description
   - Cuisine type
   - Dietary flags (Veg/Non-veg/Vegan/Halal/Gluten-free)
   - Spice level
   - Live counter indicator
5. Set display order
6. Add special dietary notes
7. Publish menu
8. Guests view menu on app/website

**Menu Builder:**
```
Wedding Reception Menu
Event: Reception - Dec 15, 2025, 7:00 PM

Meal Type: [Dinner â–¼]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STARTERS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ðŸŸ¢ Paneer Tikka                    â”‚
â”‚  Cottage cheese marinated in spices â”‚
â”‚  Cuisine: North Indian              â”‚
â”‚  Spice: Medium                      â”‚
â”‚  [Edit] [Delete]                    â”‚
â”‚                                     â”‚
â”‚  ðŸ”´ Chicken Seekh Kebab             â”‚
â”‚  Minced chicken on skewers          â”‚
â”‚  Cuisine: Mughlai                   â”‚
â”‚  Spice: Hot                         â”‚
â”‚  Halal                              â”‚
â”‚  [Edit] [Delete]                    â”‚
â”‚                                     â”‚
â”‚  [+ Add Item]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MAIN COURSE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ðŸŸ¢ Dal Makhani                     â”‚
â”‚  ðŸŸ¢ Paneer Butter Masala            â”‚
â”‚  ðŸ”´ Chicken Biryani (Live Counter)  â”‚
â”‚  ðŸ”´ Mutton Rogan Josh               â”‚
â”‚                                     â”‚
â”‚  [+ Add Item]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Add Section] [Preview Menu] [Publish]
```

**Add Menu Item Form:**
```
Add Menu Item

Section: [Main Course â–¼]

Item Name: [Chicken Biryani__________]

Description:
[Aromatic basmati rice cooked with marinated
 chicken and traditional spices____________]

Cuisine Type: [Hyderabadi â–¼]

Dietary Flags:
[ ] Vegetarian
[âœ“] Non-Vegetarian
[ ] Vegan
[âœ“] Halal
[ ] Gluten-Free
[ ] Contains Nuts

Spice Level:
â—‹ Mild
â— Medium
â—‹ Hot
â—‹ Extra Hot

Special Features:
[âœ“] Live Counter
[ ] Chef's Special
[ ] Signature Dish

Display Order: [4]

[Save] [Cancel]
```

---

### Flow 4: YouTube Live Streaming

**Trigger:** Couple wants to stream wedding live

**Steps:**
1. Navigate to Streaming section
2. Click Add Stream
3. Choose event to stream
4. Enter YouTube stream details:
   - YouTube Live URL
   - Stream title
   - Scheduled start time
   - Enable/disable chat
5. System extracts embed code
6. Test embed preview
7. Publish stream link
8. Guests access stream from event page
9. System tracks viewer count
10. After event, stream auto-archived

**Stream Setup:**
```
Add YouTube Live Stream

Event: [Wedding Ceremony â–¼]
Date: December 15, 2025

Stream Title:
[Faseen & Hanan's Wedding Ceremony - Live___]

YouTube Live URL:
[https://youtube.com/watch?v=ABC123______]

[Test URL] âœ“ Valid

Stream Type:
â— Live Streaming
â—‹ Pre-recorded Video
â—‹ Upcoming Premiere

Scheduled Start:
[ðŸ“… Dec 15, 2025] [ðŸ• 12:00 PM]

Settings:
[âœ“] Enable live chat
[âœ“] Show viewer count
[ ] Restrict to logged-in guests only
[âœ“] Send notifications when live

Privacy:
â— Public (anyone with link)
â—‹ Private (invited guests only)

[Preview Embed] [Save] [Publish]
```

**Guest View - Stream Page:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Wedding Ceremony - LIVE ðŸ”´         â”‚
â”‚  ðŸ‘ï¸ 247 viewers                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  [YouTube Video Embed]              â”‚
â”‚                                     â”‚
â”‚  Full Screen Available              â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ“… December 15, 2025               â”‚
â”‚  ðŸ• Started at 12:00 PM             â”‚
â”‚  â±ï¸ Live for 45 minutes             â”‚
â”‚                                     â”‚
â”‚  ðŸ’¬ Live Chat                       â”‚
â”‚  [Chat messages if enabled]         â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Share Stream] [Set Reminder]
```

---

### Flow 5: Gallery Upload (Guests)

**Trigger:** Guest wants to share photos/blessings

**Steps:**
1. Guest logs in during/after wedding
2. Navigates to Gallery
3. Clicks Upload button
4. Selects files (photos/videos)
5. System checks:
   - User subscription status
   - Current storage usage
   - File size limits
   - Format validation
6. If free user:
   - 200 images max (wedding-wide)
   - 500KB per image max
   - Warning: "Deleted after 7 days"
7. If paid user:
   - Unlimited uploads
   - 1MB default, up to 10MB with extra payment
8. Adds caption (optional)
9. Adds blessing message (optional)
10. Tags event/people (optional)
11. Uploads to Cloudinary
12. Image compressed automatically
13. Appears in gallery after approval (if moderation on)
14. Couple/hosts notified

**Upload Interface (Free User):**
```
Upload Photos

Storage Status:
Free User | 145 / 200 images used
âš ï¸ Media will be deleted 7 days after wedding

[Select Photos] [Take Photo]

Selected Files: 5
â”œâ”€â”€ IMG_001.jpg (650 KB) âš ï¸ Too large
â”œâ”€â”€ IMG_002.jpg (420 KB) âœ“
â”œâ”€â”€ IMG_003.jpg (380 KB) âœ“
â”œâ”€â”€ IMG_004.jpg (510 KB) âš ï¸ Too large
â””â”€â”€ IMG_005.jpg (295 KB) âœ“

System will auto-compress oversized images to 500KB

Caption (optional):
[Beautiful ceremony! Congratulations!______]

Blessing Message:
[May your love grow stronger with each passing
 day. Wishing you a lifetime of happiness____]

Tag Event: [Wedding Ceremony â–¼]

Tag People:
[Faseen] [Hanan] [+ Add]

[Upload 3 Valid Photos] [Cancel]
```

**Upload Interface (Paid User):**
```
Upload Photos

Storage Status:
Premium User | Unlimited storage
ðŸ’Ž Your media is saved forever

[Select Photos] [Select Videos] [Take Photo]

Selected Files: 5
â”œâ”€â”€ IMG_001.jpg (1.2 MB) âœ“
â”œâ”€â”€ IMG_002.jpg (850 KB) âœ“
â”œâ”€â”€ VID_001.mp4 (8.5 MB) âœ“
â”œâ”€â”€ IMG_003.jpg (2.1 MB) âœ“
â””â”€â”€ IMG_004.jpg (1.8 MB) âœ“

Total: 14.45 MB

Quality:
â—‹ Standard (1MB max per image)
â— High Quality (5MB max per image)
â—‹ Original (10MB max per image) [+â‚¹99]

[Upload All] [Cancel]
```

---

### Flow 6: Gallery View & Interaction

**Trigger:** User browses wedding gallery

**Steps:**
1. Navigate to Gallery
2. Filter options:
   - All media / Photos / Videos / Messages / Blessings
   - By event
   - By uploader
   - By date
3. Grid view or list view
4. Click media to open lightbox
5. Can like, comment, share
6. Download individual files (paid users)
7. Report inappropriate content
8. Host team can delete/hide media

**Gallery Interface:**
```
Wedding Gallery

Filters:
[All Media â–¼] [All Events â–¼] [All Uploaders â–¼]

Sort: [Most Recent â–¼] [Most Liked] [Most Viewed]

View: [âŠž Grid] [â‰¡ List]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Grid View:

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ ðŸ“·  â”‚ ðŸ“·  â”‚ ðŸ“·  â”‚ ðŸŽ¥  â”‚
â”‚ â¤ï¸45â”‚ â¤ï¸32â”‚ â¤ï¸28â”‚ â¤ï¸67â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ ðŸ’¬  â”‚ ðŸ“·  â”‚ ðŸ’¬  â”‚ ðŸ“·  â”‚
â”‚ Bls â”‚ â¤ï¸18â”‚ Bls â”‚ â¤ï¸91â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

[Load More]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Stats:
Total Items: 287
Photos: 245 | Videos: 32 | Messages: 10

Most Active Uploader: Uncle Ahmed (34 photos)
Most Liked: Couple's first dance video (247 â¤ï¸)
```

**Lightbox View:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† [Image] â†’                        â”‚
â”‚                                     â”‚
â”‚      [Full Image Display]           â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Uploaded by: Aunt Fatima           â”‚
â”‚  Event: Mehendi Ceremony            â”‚
â”‚  Date: Dec 13, 2025 6:45 PM         â”‚
â”‚                                     â”‚
â”‚  Caption:                           â”‚
â”‚  Beautiful mehendi designs! âœ¨      â”‚
â”‚                                     â”‚
â”‚  â¤ï¸ 45 likes  ðŸ’¬ 8 comments         â”‚
â”‚  ðŸ‘ï¸ 123 views                      â”‚
â”‚                                     â”‚
â”‚  [â¤ï¸ Like] [ðŸ’¬ Comment] [â†—ï¸ Share]  â”‚
â”‚                                     â”‚
â”‚  Comments:                          â”‚
â”‚  â€¢ Hanan: Thank you! So pretty! ðŸ˜ â”‚
â”‚  â€¢ Mother: Mashallah! â¤ï¸           â”‚
â”‚                                     â”‚
â”‚  [Add Comment]                      â”‚
â”‚                                     â”‚
â”‚  [Download] (Paid users only)       â”‚
â”‚  [Report] (if inappropriate)        â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flow 7: Bulk Download (Paid Users Only)

**Trigger:** Paid user wants all wedding media

**Steps:**
1. Navigate to Gallery
2. Click Bulk Download button
3. Select download options:
   - All media
   - Photos only
   - Videos only
   - Specific event
   - Date range
   - By uploader
4. System calculates:
   - Total files
   - Total size
   - Estimated time
5. Request bulk download
6. System creates ZIP file in background
7. Generates password-protected download link
8. Expires in 48 hours
9. User notified via email when ready
10. Downloads ZIP file
11. Can request again anytime (paid users)

**Bulk Download Interface:**
```
Bulk Download Gallery

Premium Feature - Available for paid users only

Download Options:
[âœ“] All media
[ ] Photos only
[ ] Videos only
[ ] Specific event: [All Events â–¼]
[ ] Date range: [From] [To]
[ ] By uploader: [All Uploaders â–¼]

Current Selection:
â”œâ”€â”€ Photos: 245 files (342 MB)
â”œâ”€â”€ Videos: 32 files (1.8 GB)
â”œâ”€â”€ Messages: 10 items (text only)
â””â”€â”€ Total: 287 items (2.14 GB)

Estimated download time: 15-20 minutes
(depending on your internet speed)

File Format: ZIP (password protected)
Link expires: 48 hours after creation

[Request Download] [Cancel]

Recent Downloads:
â€¢ All media (Dec 16, 2025) - 2.14 GB [Download Again]
â€¢ Photos only (Dec 15, 2025) - Expired
```

**Download Ready Email:**
```
Subject: Your wedding gallery download is ready!

Hi Faseen,

Your bulk download of 287 files (2.14 GB) is ready!

Download Link: https://emowed.com/downloads/XYZ123
Password: WEDDING2025

This link expires in 48 hours (Dec 18, 2025, 10:00 AM).

Files included:
â€¢ 245 Photos (342 MB)
â€¢ 32 Videos (1.8 GB)
â€¢ 10 Message cards (text)

[Download Now]

Need help? Contact support@emowed.com

Best regards,
The Emowed Team
```

---

### Flow 8: Data Deletion (Free Users)

**Trigger:** 7 days after wedding date (free users only)

**Automated Process:**
1. Cron job runs daily at midnight
2. Checks media_deletion_schedule table
3. Identifies weddings where:
   - deletion_scheduled_date = today
   - is_paid_wedding = false
   - deletion_executed = false
4. For each wedding:
   - Deletes all media_gallery records
   - Deletes Cloudinary files
   - Keeps metadata:
     - Family tree connections
     - RSVP totals (not details)
     - Vendor bookings
     - Wedding card (as PDF snapshot)
   - Marks deletion as executed
5. Sends confirmation email to couple

**7-Day Warning Email (Free Users):**
```
Subject: âš ï¸ Your wedding media will be deleted in 7 days

Hi Faseen & Hanan,

Your wedding was on December 15, 2025.

As free users, your media gallery will be automatically
deleted on December 22, 2025 (7 days post-wedding).

What will be deleted:
â€¢ All photos (245 files)
â€¢ All videos (32 files)
â€¢ Guest messages and blessings

What will be preserved:
â€¢ Wedding card
â€¢ Event timeline
â€¢ Guest list (names only)
â€¢ Vendor bookings

Want to keep your memories forever?
Upgrade to Premium: â‚¹2,999 (one-time)

[Upgrade Now] [Download All Media First]

Need help? Contact support@emowed.com
```

**Deletion Confirmation Email:**
```
Subject: Your wedding media has been deleted

Hi Faseen & Hanan,

As per our storage policy, your wedding gallery has been
deleted 7 days after your wedding date.

Deleted Items:
â€¢ 245 photos (342 MB)
â€¢ 32 videos (1.8 GB)
â€¢ 10 messages

Preserved Data:
â€¢ Wedding card (PDF)
â€¢ Family tree
â€¢ Guest headcount: 188 guests
â€¢ Vendor contacts

Want to avoid this in the future?
Premium users get unlimited storage forever.

[Upgrade to Premium]

Thank you for using Emowed!
```

---

### Flow 9: Couple Name Animation (Home Screen)

**Trigger:** Wedding card published

**Automatic Display:**
1. System extracts couple names from wedding card
2. Displays on home screen header:
   - "Faseen weds Hanan"
   - OR "Faseen â¤ï¸ Hanan"
   - OR "Faseen ðŸ’ Hanan"
3. Free users get basic animations:
   - Fade in/out
   - Slide
   - Heart particles
   - Flower petals
4. Paid users can upload custom GIF:
   - Max 5MB file size
   - Auto-loops
   - Displayed prominently

**Animation Options (Free):**
```
Couple Name Animation

Current: "Faseen ðŸ’ Hanan"

Animation Style:
â—‹ Fade In/Out (smooth transition)
â— Hearts (floating hearts around names)
â—‹ Flowers (falling petals)
â—‹ Rings (rotating wedding rings)
â—‹ Slide (left to right reveal)
â—‹ None (static text)

Preview:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚       â¤ï¸  â¤ï¸  â¤ï¸  â¤ï¸  â¤ï¸           â”‚
â”‚                                     â”‚
â”‚        Faseen ðŸ’ Hanan              â”‚
â”‚                                     â”‚
â”‚       â¤ï¸  â¤ï¸  â¤ï¸  â¤ï¸  â¤ï¸           â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Save Animation]
```

**Custom GIF Upload (Paid):**
```
Upload Custom Animation GIF

Current Animation: Hearts (default)

Upgrade to Premium to unlock:
âœ“ Custom GIF upload (your own animation)
âœ“ Multiple animations per page
âœ“ Longer display duration

Upload GIF:
[Choose File] (Max 5MB, auto-loops)

Preview:
[GIF Preview Here]

Display Settings:
Duration: [5] seconds
Loop: [âœ“] Continuous

[Upload & Save] [Use Default Animation]

Premium Feature - Upgrade for â‚¹2,999
```

---

## PAGE SPECIFICATIONS

### Page 1: Wedding Card Creator (`/wedding/:id/card/create`)

**Layout:**
```
Sidebar (Template Selection)
â”œâ”€â”€ Template Categories
â”‚   â”œâ”€â”€ Hindu Traditional
â”‚   â”œâ”€â”€ Muslim Traditional
â”‚   â”œâ”€â”€ Christian Traditional
â”‚   â”œâ”€â”€ Modern Minimal
â”‚   â”œâ”€â”€ Floral
â”‚   â””â”€â”€ Royal
â”œâ”€â”€ Template thumbnails
â””â”€â”€ [Upload Custom] [Upload PDF]

Main Canvas
â”œâ”€â”€ Live preview of card
â”œâ”€â”€ Real-time updates as user types
â”œâ”€â”€ Zoom controls
â””â”€â”€ Mobile preview toggle

Right Panel (Customization)
â”œâ”€â”€ Couple Names input
â”œâ”€â”€ Display format selector
â”œâ”€â”€ Date/time inputs
â”œâ”€â”€ Venue details
â”œâ”€â”€ Message textarea
â”œâ”€â”€ Photo upload
â”œâ”€â”€ Animation selector
â”œâ”€â”€ Color picker
â”œâ”€â”€ Font selector
â””â”€â”€ [Save Draft] [Publish]
```

### Page 2: Event Program Manager (`/wedding/:id/program`)

**Layout:**
```
Header
â”œâ”€â”€ Event selector dropdown
â”œâ”€â”€ [Add Program] button
â””â”€â”€ [Publish Schedule]

Timeline View
â”œâ”€â”€ Vertical timeline
â”œâ”€â”€ Program cards (draggable)
â”œâ”€â”€ Live indicator (red dot)
â”œâ”€â”€ Time markers
â””â”€â”€ Duration bars

Program Card
â”œâ”€â”€ Time range
â”œâ”€â”€ Title (editable inline)
â”œâ”€â”€ Description
â”œâ”€â”€ Responsible person
â”œâ”€â”€ Special notes badge
â”œâ”€â”€ [Edit] [Delete] [Mark Live]
â””â”€â”€ Drag handle (â‹®â‹®)

Preview Panel
â”œâ”€â”€ Guest view simulation
â”œâ”€â”€ Mobile preview
â””â”€â”€ [Send Preview Link]
```

### Page 3: Menu Manager (`/wedding/:id/menu`)

**Layout:**
```
Header
â”œâ”€â”€ Event selector
â”œâ”€â”€ [Add Section] [Add Item]
â””â”€â”€ [Publish Menu]

Sections (Accordion)
â”œâ”€â”€ Starters
â”‚   â”œâ”€â”€ Item cards (grid)
â”‚   â””â”€â”€ [Add Item]
â”œâ”€â”€ Main Course
â”‚   â”œâ”€â”€ Item cards
â”‚   â””â”€â”€ [Add Item]
â”œâ”€â”€ Breads & Rice
â”œâ”€â”€ Desserts
â””â”€â”€ Beverages

Item Card
â”œâ”€â”€ Veg/Non-veg indicator
â”œâ”€â”€ Item name
â”œâ”€â”€ Description
â”œâ”€â”€ Dietary icons (Halal, Vegan, etc.)
â”œâ”€â”€ Spice level indicator
â”œâ”€â”€ Live counter badge
â””â”€â”€ [Edit] [Delete]

Preview Panel
â”œâ”€â”€ Guest menu view
â”œâ”€â”€ Printable version
â””â”€â”€ [Download PDF]
```

### Page 4: Streaming Hub (`/wedding/:id/streaming`)

**Layout:**
```
Header
â”œâ”€â”€ Active Streams indicator
â”œâ”€â”€ [Add Stream] button
â””â”€â”€ Viewer stats

Stream Cards
â”œâ”€â”€ Event name
â”œâ”€â”€ Stream status (Live/Scheduled/Ended)
â”œâ”€â”€ YouTube thumbnail
â”œâ”€â”€ Viewer count (live)
â”œâ”€â”€ Start/end times
â”œâ”€â”€ [Edit] [Delete] [View]
â””â”€â”€ [Go Live] button

Add/Edit Stream Form
â”œâ”€â”€ Event selector
â”œâ”€â”€ YouTube URL input
â”œâ”€â”€ Title input
â”œâ”€â”€ Schedule datetime
â”œâ”€â”€ Settings checkboxes
â”œâ”€â”€ Privacy selector
â””â”€â”€ [Test Embed] [Save]

Active Stream View (Full Page)
â”œâ”€â”€ YouTube embed (responsive)
â”œâ”€â”€ Live chat (if enabled)
â”œâ”€â”€ Viewer count (realtime)
â”œâ”€â”€ Share buttons
â””â”€â”€ Related events
```

### Page 5: Gallery (`/wedding/:id/gallery`)

**Layout:**
```
Header
â”œâ”€â”€ [Upload] button
â”œâ”€â”€ Search bar
â”œâ”€â”€ Filter dropdowns
â”œâ”€â”€ View toggle (grid/list)
â””â”€â”€ [Bulk Download] (paid only)

Filters Bar
â”œâ”€â”€ Media type (All/Photos/Videos/Messages)
â”œâ”€â”€ Event filter
â”œâ”€â”€ Uploader filter
â”œâ”€â”€ Date range
â””â”€â”€ Sort by

Gallery Grid
â”œâ”€â”€ Masonry layout
â”œâ”€â”€ Lazy loading
â”œâ”€â”€ Thumbnail with metadata overlay
â”‚   â”œâ”€â”€ Uploader avatar
â”‚   â”œâ”€â”€ Likes count
â”‚   â”œâ”€â”€ Comments count
â”‚   â””â”€â”€ Media type icon
â”œâ”€â”€ Infinite scroll
â””â”€â”€ [Load More]

Lightbox (on click)
â”œâ”€â”€ Full image/video
â”œâ”€â”€ Navigation arrows
â”œâ”€â”€ Metadata panel
â”œâ”€â”€ Like/Comment/Share
â”œâ”€â”€ Download button (paid)
â””â”€â”€ [Report] button

Upload Modal
â”œâ”€â”€ File selector
â”œâ”€â”€ Storage status bar
â”œâ”€â”€ Selected files list
â”œâ”€â”€ Caption input
â”œâ”€â”€ Blessing textarea
â”œâ”€â”€ Tag inputs
â””â”€â”€ [Upload] [Cancel]
```

### Page 6: Storage Dashboard (`/wedding/:id/storage`)

**Layout:**
```
Header
â”œâ”€â”€ Subscription badge
â”œâ”€â”€ Storage limit
â””â”€â”€ [Upgrade] button (if free)

Storage Stats (Cards)
â”œâ”€â”€ Total Storage Used
â”œâ”€â”€ Photos Count
â”œâ”€â”€ Videos Count
â””â”€â”€ Days Until Deletion (free users)

Usage Breakdown (Chart)
â”œâ”€â”€ Photos (MB)
â”œâ”€â”€ Videos (MB)
â”œâ”€â”€ By event (pie chart)
â””â”€â”€ By uploader (bar chart)

File Limits Table
â”œâ”€â”€ Free vs Paid comparison
â”œâ”€â”€ Image size limits
â”œâ”€â”€ Upload limits
â””â”€â”€ Storage duration

Action Buttons
â”œâ”€â”€ [Download All] (paid)
â”œâ”€â”€ [Upgrade to Premium]
â””â”€â”€ [Delete Manually]
```

---

## API ENDPOINTS

### POST `/api/wedding-cards/create`
**Request:**
```json
{
  "wedding_id": "uuid",
  "template_id": "hindu_ganesh_001",
  "groom_name": "Faseen Farook",
  "bride_name": "Hanan Rasheed",
  "wedding_date": "2025-12-15",
  "venue_name": "Grand Palace Hotel",
  "venue_address": "123 Marine Drive",
  "city": "Mumbai",
  "ceremony_time": "12:00",
  "reception_time": "19:00",
  "custom_message": "Join us in celebrating...",
  "animation_type": "hearts",
  "color_scheme": {
    "primary": "#FF6B9D",
    "secondary": "#FFD700",
    "background": "#FFF5F7"
  }
}
```

### PUT `/api/wedding-cards/:id`

### POST `/api/wedding-cards/:id/upload-image`
**Multipart form data:**
```
couple_image: File
background_image: File
```

### POST `/api/wedding-cards/:id/upload-gif`
**Multipart form data (paid users only):**
```
custom_gif: File (max 5MB)
```

### GET `/api/wedding-cards/:id/public`
**Response (public shareable):**
```json
{
  "groom_name": "Faseen",
  "bride_name": "Hanan",
  "wedding_date": "2025-12-15",
  "venue": "Grand Palace Hotel, Mumbai",
  "ceremony_time": "12:00 PM",
  "message": "Join us...",
  "card_image_url": "...",
  "animation_url": "..."
}
```

### POST `/api/event-programs/create`
**Request:**
```json
{
  "event_id": "uuid",
  "program_title": "Baraat Procession",
  "program_description": "Groom's grand entry",
  "start_time": "12:30",
  "duration_minutes": 30,
  "responsible_person": "DJ: Sound Masters",
  "program_order": 2
}
```

### PUT `/api/event-programs/:id/mark-live`

### PUT `/api/event-programs/reorder`
**Request:**
```json
{
  "event_id": "uuid",
  "program_ids": ["uuid1", "uuid2", "uuid3"]
}
```

### POST `/api/menu-items/create`
**Request:**
```json
{
  "wedding_id": "uuid",
  "event_id": "uuid",
  "meal_type": "dinner",
  "category": "main_course",
  "item_name": "Chicken Biryani",
  "description": "Aromatic basmati rice...",
  "cuisine_type": "Hyderabadi",
  "is_vegetarian": false,
  "is_halal": true,
  "spice_level": "medium",
  "is_live_counter": true,
  "display_order": 4
}
```

### POST `/api/youtube-streams/create`
**Request:**
```json
{
  "wedding_id": "uuid",
  "event_id": "uuid",
  "stream_title": "Wedding Ceremony - Live",
  "youtube_url": "https://youtube.com/watch?v=ABC123",
  "scheduled_start": "2025-12-15T12:00:00Z",
  "chat_enabled": true
}
```

### PUT `/api/youtube-streams/:id/go-live`

### POST `/api/media-gallery/upload`
**Multipart form data:**
```
files: File[] (multiple)
caption: string
blessing_text: string
event_id: uuid
tags: string[]
```

### GET `/api/media-gallery/:wedding_id`
**Query params:**
```
?media_type=photo
&event_id=uuid
&uploader_id=uuid
&sort=most_recent
&limit=20
&offset=0
```

### POST `/api/media-gallery/:id/like`

### POST `/api/media-gallery/:id/comment`
**Request:**
```json
{
  "comment_text": "Beautiful photo!"
}
```

### POST `/api/media-gallery/:id/report`
**Request:**
```json
{
  "reason": "inappropriate_content",
  "details": "Contains offensive material"
}
```

### DELETE `/api/media-gallery/:id`
**(Host team only)**

### POST `/api/bulk-download/request`
**Request (paid users only):**
```json
{
  "wedding_id": "uuid",
  "download_type": "all_media",
  "event_id": null,
  "filter_criteria": {
    "start_date": "2025-12-15",
    "end_date": "2025-12-15"
  }
}
```

### GET `/api/bulk-download/:id/status`
**Response:**
```json
{
  "status": "ready",
  "zip_file_url": "...",
  "zip_file_password": "WEDDING2025",
  "total_files": 287,
  "total_size_mb": 2140,
  "expires_at": "2025-12-18T10:00:00Z"
}
```

### GET `/api/storage-usage/:wedding_id`
**Response:**
```json
{
  "total_photos": 245,
  "total_videos": 32,
  "total_size_mb": 2140,
  "storage_limit_mb": 500,
  "is_paid_user": false,
  "days_until_deletion": 5,
  "deletion_scheduled_date": "2025-12-22"
}
```

---

## BUSINESS RULES

### Wedding Card
- One card per wedding
- Template selection optional (can upload custom)
- PDF upload max 10MB
- Custom GIF upload: Paid users only, max 5MB
- Shareable public link generated on publish
- Card viewable without login

### Event Program
- Unlimited programs per event
- Drag-and-drop reordering
- Only one program can be "live" at a time
- Real-time updates pushed to all guests
- Past programs automatically marked "completed"

### Menu Items
- Unlimited items per wedding
- Dietary flags required
- Spice level optional but recommended
- Live counter indicator for interactive stations
- Menu printable as PDF

### YouTube Streaming
- Unlimited streams per wedding
- Valid YouTube URL required
- Embed auto-extracted
- Viewer count tracked (if public)
- Stream status updated manually or auto-detected
- Chat enabled by default

### Media Gallery
- **Free Users:**
  - 200 images max per wedding (all guests combined)
  - 500KB max per image
  - Auto-compression if exceeds limit
  - Deleted 7 days post-wedding
  - Cannot download bulk
  - Warning displayed on every upload

- **Paid Users:**
  - Unlimited uploads
  - 1MB default, 5MB high quality, 10MB original (extra charge)
  - Permanent storage
  - Bulk download anytime
  - Can download individual files

### Storage Limits
- Free: 500MB total per wedding
- Paid: Unlimited
- Videos count as 10x photos in quota
- Storage calculated on upload
- Notifications at 80%, 90%, 100%

### Content Moderation
- Couple can enable pre-approval (all uploads hidden until approved)
- Host team can delete any media
- Users can report inappropriate content
- Auto-flagging for explicit content (AI-based)
- Reported content hidden until review

### Bulk Download
- Paid users only
- ZIP file generated in background
- Password protected
- Expires 48 hours
- Can request multiple times
- Email notification when ready

### Data Deletion
- Free users: 7 days post-wedding
- Paid users: Never deleted
- Deletion schedule created on wedding completion
- Warning emails at 7 days, 3 days, 1 day before
- Deletion irreversible
- Metadata preserved (family tree, headcount totals)

---

## NOTIFICATION TRIGGERS

### Wedding Card Published
**To:** All invited guests
**Subject:** View [Couple]'s digital wedding invitation

### Program Update (Live)
**To:** All guests
**Push:** "Baraat Procession starting now! ðŸŽ‰"

### Stream Going Live
**To:** All guests
**Push:** "Wedding ceremony is now LIVE! Watch now ðŸ“º"

### Upload Success
**To:** Uploader
**Subject:** Your photos uploaded successfully

### Storage Limit Warning (80%)
**To:** Couple (free users)
**Subject:** âš ï¸ You've used 80% of your storage

### Storage Limit Reached
**To:** Couple (free users)
**Subject:** âš ï¸ Storage full - Upgrade to continue uploads

### 7-Day Deletion Warning
**To:** Couple (free users)
**Subject:** Your media will be deleted in 7 days

### Bulk Download Ready
**To:** Requester
**Subject:** Your wedding gallery download is ready

### Media Reported
**To:** Couple + Host team
**Subject:** Content flagged for review

---

## VALIDATION RULES

### Wedding Card
- Couple names required
- Wedding date must be valid
- Venue name max 200 characters
- Message max 1000 characters
- Image formats: JPG, PNG, WEBP
- Max image size: 5MB
- GIF size: Max 5MB (paid only)

### Event Program
- Title: 5-100 characters
- Start time required
- Duration: 5-600 minutes
- Description max 500 characters

### Menu Item
- Name: 3-100 characters
- At least one dietary flag required
- Description max 300 characters

### YouTube Stream
- URL must be valid YouTube format
- Must be live stream or video
- Title max 200 characters

### Media Upload
- Formats: JPG, PNG, WEBP, MP4, MOV
- Free users: 500KB max per image
- Paid users: 1MB/5MB/10MB tiers
- Videos: 100MB max
- Caption max 500 characters
- Blessing max 1000 characters

---

## PERFORMANCE REQUIREMENTS

- Wedding card load: < 1 second
- Gallery page load: < 2 seconds (initial 20 items)
- Image upload: < 5 seconds per image
- Bulk download ZIP generation: < 5 minutes (up to 1000 files)
- YouTube embed load: < 2 seconds
- Real-time program updates: < 1 second delay

---

## SECURITY REQUIREMENTS

- Wedding cards: Public links (no auth required)
- Gallery: Authenticated guests only
- Upload: Only invited guests can upload
- Delete: Only uploader or host team
- Bulk download: Paid users only, password protected
- Admin controls: Couple + designated hosts only
- Content moderation: Automated + manual review

---

## SUCCESS METRICS

- Average uploads per guest: 5+
- Gallery engagement rate: 70%+ guests upload
- Stream viewership: 40%+ of invited guests
- Card views: 90%+ guests view card
- Bulk download requests: 60%+ paid users
- Storage upgrade conversion: 25%+ free users
- Media deletion opt-out: 80%+ upgrade before 7 days